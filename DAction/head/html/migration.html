<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DAction: Migration from DAction 1.0-1.4 to DAction2 guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="ChimeraTK_Logo_whitebg.png"/></td>
  <td id="projectalign">
   <div id="projectname">DAction<span id="projectnumber">&#160;03.01.02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('migration.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Migration from DAction 1.0-1.4 to DAction2 guide</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#headeronlymigration">Library is header-only now</a></li>
<li class="level1"><a href="#dfctmigration">Changing D_XExtended classes</a></li>
<li class="level1"><a href="#actionmigration">Changing Actions</a></li>
<li class="level1"><a href="#newandremovedfeaturesmigration">New features, removed features</a></li>
</ul>
</div>
<div class="textblock"><p>There are things that have changed during the library development, and many of them makes the previous features source of errors. To ease the pain of migration, the following guide was prepared.</p>
<h1><a class="anchor" id="headeronlymigration"></a>
Library is header-only now</h1>
<p>Since the library is header-only, you do not have to include it in the Makefile's linker. please remove your -lDAction directive.</p>
<h1><a class="anchor" id="dfctmigration"></a>
Changing D_XExtended classes</h1>
<p>Previously, the D_XExtended classes were not templated and you had to include implementation for each of them. Now, it is not necessary.</p>
<p>Also, headers of <a class="el" href="namespace_d_action.html">DAction</a> library were moved to <a class="el" href="namespace_d_action.html">DAction</a> directory, so this has to be reflected in the #include directive.</p>
<p>Finally, since we are not using D_XExtended anymore, the declarations have changed.</p>
<div class="fragment"><div class="line"><span class="comment">// ...before...</span></div>
<div class="line"><span class="preprocessor">#include &lt;D_floatExtended.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;D_stringExtended.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;D_intarrayExtended.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// ...after...</span></div>
<div class="line"><span class="preprocessor">#include &lt;DAction/D_fctExtended.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;DAction/D_fctarrayExtended.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>YourEqFct : EqFct {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"><span class="comment">// ...before...</span></div>
<div class="line">D_floatExtended voltage;</div>
<div class="line">D_intarrayExtended channelData;</div>
<div class="line">D_stringExtended nameOfYourPet;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ...after...</span></div>
<div class="line"><a class="code hl_class" href="class_d__fct_extended.html">D_fctExtended&lt;D_float, float&gt;</a> voltage;</div>
<div class="line"><a class="code hl_class" href="class_d__fctarray_extended.html">D_fctarrayExtended&lt;D_intarray, int&gt;</a>   channelData;</div>
<div class="line"><a class="code hl_class" href="class_d__fct_extended.html">D_fctExtended&lt;D_string, const char *&gt;</a> nameOfYourPet;</div>
<div class="line">};</div>
<div class="ttc" id="aclass_d__fct_extended_html"><div class="ttname"><a href="class_d__fct_extended.html">D_fctExtended</a></div><div class="ttdoc">A class that implements the component pattern design in DOOCS properties.</div><div class="ttdef"><b>Definition</b> <a href="_d__fct_extended_8h_source.html#l00028">D_fctExtended.h:28</a></div></div>
<div class="ttc" id="aclass_d__fctarray_extended_html"><div class="ttname"><a href="class_d__fctarray_extended.html">D_fctarrayExtended</a></div><div class="ttdoc">A class that implements the component pattern design in DOOCS properties.</div><div class="ttdef"><b>Definition</b> <a href="_d__fctarray_extended_8h_source.html#l00016">D_fctarrayExtended.h:16</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="actionmigration"></a>
Changing Actions</h1>
<p>If you've used ActionDevAccessDummyDevice or ActionDevAccessPCIEDevice - those classes were unified by using common mtca4u::Device class.</p>
<p>The resulting class was named <a class="el" href="class_action_device_access.html" title="Class fulfilling the interface of ActionBase class.">ActionDeviceAccess</a> - it has similar constructor and uses boost::shared_ptr underneath.</p>
<div class="fragment"><div class="line"><span class="comment">// ...before...</span></div>
<div class="line">voltage.setAction(<span class="keyword">new</span> ActionDevAccessDummyDevice&lt;float&gt;(<span class="comment">/*...constructorParameters...*/</span>));</div>
<div class="line"><span class="comment">// ...after...</span></div>
<div class="line">voltage.setAction(<span class="keyword">new</span> <a class="code hl_class" href="class_action_device_access.html">ActionDeviceAccess&lt;float&gt;</a>(<span class="comment">/*...constructorParameters...*/</span>));</div>
<div class="ttc" id="aclass_action_device_access_html"><div class="ttname"><a href="class_action_device_access.html">ActionDeviceAccess</a></div><div class="ttdoc">Class fulfilling the interface of ActionBase class.</div><div class="ttdef"><b>Definition</b> <a href="_action_device_access_8h_source.html#l00023">ActionDeviceAccess.h:23</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="newandremovedfeaturesmigration"></a>
New features, removed features</h1>
<ul>
<li>If you were using Validator class - unfortunately, it was removed. If you still want to use it, please implement it in your own Action or Limiter, which are still fully functional.</li>
<li>Some methods in <a class="el" href="class_tools.html">Tools</a>, that were DOOCS-dependent, were moved to <a class="el" href="namespace_doocs_tools.html">DoocsTools</a> class. It is still a static class that provides some helping methods.</li>
<li>A new class, <a class="el" href="class_action_callback.html" title="Class fulfilling the interface of ActionBase class.">ActionCallback</a>, was introduced, to allow simple boost::function callback wrapping.</li>
<li>Changed naming in <a class="el" href="namespace_converter.html">Converter</a> class, to highlight which of the conversions are generic, and which are TMCB-oriented.</li>
<li>Introduced <a class="el" href="class_limiter_in_range.html">LimiterInRange</a>, made <a class="el" href="class_limiter_between.html">LimiterBetween</a> a little better. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
