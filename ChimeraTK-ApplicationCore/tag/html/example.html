<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ChimeraTK-ApplicationCore: Example: Basic structure of an Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="ChimeraTK_Logo_whitebg.png"/></td>
  <td id="projectalign">
   <div id="projectname">ChimeraTK-ApplicationCore<span id="projectnumber">&#160;04.03.01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Example: Basic structure of an Application</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#example_include">include</a><ul><li class="level2"><a href="#example_include_SetpointRamp_h">include/SetpointRamp.h</a></li>
<li class="level2"><a href="#example_include_AverageCurrent_h">include/AverageCurrent.h</a></li>
<li class="level2"><a href="#example_include_Controller_h">include/Controller.h</a></li>
<li class="level2"><a href="#example_include_ExampleApp_h">include/ExampleApp.h</a></li>
</ul>
</li>
<li class="level1"><a href="#example_src">src</a><ul><li class="level2"><a href="#example_src_SetpointRamp_cc">src/AutomSetpointRampation.cc</a></li>
<li class="level2"><a href="#example_src_AverageCurrent_cc">src/AverageCurrent.cc</a></li>
<li class="level2"><a href="#example_src_Controller_cc">src/AutomatiControlleron.cc</a></li>
<li class="level2"><a href="#example_src_ExampleApp_cc">src/ExampleApp.cc</a></li>
</ul>
</li>
<li class="level1"><a href="#example_src_factory">src_factory</a><ul><li class="level2"><a href="#example_src_factrory_FactoryInstance">.cc src_factory/FactoryInstance.cc</a></li>
</ul>
</li>
<li class="level1"><a href="#example_config">config</a><ul><li class="level2"><a href="#example_config_demo_example-config">.xml config/demo_example-config.xml</a></li>
<li class="level2"><a href="#example_config_demo_example-DoocsVariableConfig">.xml config/demo_example-DoocsVariableConfig.xml</a></li>
<li class="level2"><a href="#example_config_demo_example_conf">config/demo_example.conf</a></li>
<li class="level2"><a href="#example_config_demo_example_dmap">config/demo_example.dmap</a></li>
<li class="level2"><a href="#example_config_DemoDummy_map">config/DemoDummy.map</a></li>
<li class="level2"><a href="#example_config_oven_xlmap">config/oven.xlmap</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This example shows the basic structure of an Application written with ApplicationCore.</p>
<p>The full example project can be found in the "example" subdirectory. Please refer to the <a class="el" href="conceptual_overview.html">Conceptual overview</a> for detail explanation.</p>
<p>The directory structure looks like this:</p>
<ul>
<li>CMakeLists.txt - cmake project configuration</li>
<li>include/... - Header files for the ApplicationModule and the Application implementations</li>
<li>src/... - Source files for the ApplicationModule and the Application implementations</li>
<li>src_factory/... - Source file for creating the instance of the ApplicationFactory</li>
<li>config/... - Configuration files needed for testing and demo execution</li>
<li>cmake/... - These files are coming from the project template and must not be altered</li>
<li>All other files in project root - These files are coming from the project template and must not be altered</li>
</ul>
<h1><a class="anchor" id="example_include"></a>
include</h1>
<h2><a class="anchor" id="example_include_SetpointRamp_h"></a>
include/SetpointRamp.h</h2>
<div class="fragment"><div class="line"><span class="comment">// SPDX-FileCopyrightText: Deutsches Elektronen-Synchrotron DESY, MSK, ChimeraTK Project &lt;chimeratk-support@desy.de&gt;</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: LGPL-3.0-or-later</span></div>
<div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This example is explained as part of the \ref conceptualOverview. Please refere there for step-by-step explanations.</span></div>
<div class="line"><span class="comment"> * Reading the full example might not be a good starting point for learning ApplicationCore as it can be overwelming</span></div>
<div class="line"><span class="comment"> * and lacks important background information.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Please ignore all comments of the format &quot;//! [some name]&quot;, those are used for Doxygen to include code snippets in</span></div>
<div class="line"><span class="comment"> * the documentation pages.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;ChimeraTK/ApplicationCore/ApplicationCore.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_chimera_t_k.html">ctk</a> = <a class="code hl_namespace" href="namespace_chimera_t_k.html">ChimeraTK</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code hl_class" href="class_setpoint_ramp.html">SetpointRamp</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_chimera_t_k_1_1_application_module.html">ctk::ApplicationModule</a> {</div>
<div class="line">  <span class="keyword">using </span>ctk::ApplicationModule::ApplicationModule;</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_struct" href="struct_chimera_t_k_1_1_scalar_poll_input.html">ctk::ScalarPollInput&lt;float&gt;</a> operatorSetpoint{<span class="keyword">this</span>, <span class="stringliteral">&quot;operatorSetpoint&quot;</span>, <span class="stringliteral">&quot;degC&quot;</span>, <span class="stringliteral">&quot;...&quot;</span>};</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">struct </span>ControllerInterface : <a class="code hl_class" href="class_chimera_t_k_1_1_variable_group.html">ctk::VariableGroup</a> {</div>
<div class="line">    <span class="keyword">using </span>ctk::VariableGroup::VariableGroup;</div>
<div class="line">    <a class="code hl_struct" href="struct_chimera_t_k_1_1_scalar_output.html">ctk::ScalarOutput&lt;float&gt;</a> actualSetpoint{<span class="keyword">this</span>, <span class="stringliteral">&quot;temperatureSetpoint&quot;</span>, <span class="stringliteral">&quot;degC&quot;</span>, <span class="stringliteral">&quot;...&quot;</span>};</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  ControllerInterface ctrl{<span class="keyword">this</span>, <span class="stringliteral">&quot;/ControlUnit/Controller&quot;</span>, <span class="stringliteral">&quot;&quot;</span>};</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_struct" href="struct_chimera_t_k_1_1_scalar_push_input.html">ctk::ScalarPushInput&lt;uint64_t&gt;</a> trigger{<span class="keyword">this</span>, <span class="stringliteral">&quot;/Timer/tick&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;...&quot;</span>};</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> mainLoop() <span class="keyword">override</span>;</div>
<div class="line">};</div>
<div class="ttc" id="aclass_chimera_t_k_1_1_application_module_html"><div class="ttname"><a href="class_chimera_t_k_1_1_application_module.html">ChimeraTK::ApplicationModule</a></div><div class="ttdef"><b>Definition</b> <a href="_application_module_8h_source.html#l00024">ApplicationModule.h:24</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_variable_group_html"><div class="ttname"><a href="class_chimera_t_k_1_1_variable_group.html">ChimeraTK::VariableGroup</a></div><div class="ttdef"><b>Definition</b> <a href="_variable_group_8h_source.html#l00022">VariableGroup.h:22</a></div></div>
<div class="ttc" id="aclass_setpoint_ramp_html"><div class="ttname"><a href="class_setpoint_ramp.html">SetpointRamp</a></div><div class="ttdef"><b>Definition</b> <a href="_setpoint_ramp_8h_source.html#l00018">SetpointRamp.h:18</a></div></div>
<div class="ttc" id="anamespace_chimera_t_k_html"><div class="ttname"><a href="namespace_chimera_t_k.html">ChimeraTK</a></div><div class="ttdoc">InvalidityTracer application module.</div><div class="ttdef"><b>Definition</b> <a href="spec__data_validity_propagation_8dox_source.html#l00002">spec_dataValidityPropagation.dox:2</a></div></div>
<div class="ttc" id="astruct_chimera_t_k_1_1_scalar_output_html"><div class="ttname"><a href="struct_chimera_t_k_1_1_scalar_output.html">ChimeraTK::ScalarOutput</a></div><div class="ttdoc">Convenience class for output scalar accessors (always UpdateMode::push)</div><div class="ttdef"><b>Definition</b> <a href="_scalar_accessor_8h_source.html#l00093">ScalarAccessor.h:93</a></div></div>
<div class="ttc" id="astruct_chimera_t_k_1_1_scalar_poll_input_html"><div class="ttname"><a href="struct_chimera_t_k_1_1_scalar_poll_input.html">ChimeraTK::ScalarPollInput</a></div><div class="ttdoc">Convenience class for input scalar accessors with UpdateMode::poll.</div><div class="ttdef"><b>Definition</b> <a href="_scalar_accessor_8h_source.html#l00081">ScalarAccessor.h:81</a></div></div>
<div class="ttc" id="astruct_chimera_t_k_1_1_scalar_push_input_html"><div class="ttname"><a href="struct_chimera_t_k_1_1_scalar_push_input.html">ChimeraTK::ScalarPushInput</a></div><div class="ttdoc">Convenience class for input scalar accessors with UpdateMode::push.</div><div class="ttdef"><b>Definition</b> <a href="_scalar_accessor_8h_source.html#l00070">ScalarAccessor.h:70</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="example_include_AverageCurrent_h"></a>
include/AverageCurrent.h</h2>
<div class="fragment"><div class="line"><span class="comment">// SPDX-FileCopyrightText: Deutsches Elektronen-Synchrotron DESY, MSK, ChimeraTK Project &lt;chimeratk-support@desy.de&gt;</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: LGPL-3.0-or-later</span></div>
<div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This example is explained as part of the \ref conceptualOverview. Please refere there for step-by-step explanations.</span></div>
<div class="line"><span class="comment"> * Reading the full example might not be a good starting point for learning ApplicationCore as it can be overwelming</span></div>
<div class="line"><span class="comment"> * and lacks important background information.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Please ignore all comments of the format &quot;//! [some name]&quot;, those are used for Doxygen to include code snippets in</span></div>
<div class="line"><span class="comment"> * the documentation pages.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;ChimeraTK/ApplicationCore/ApplicationCore.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_chimera_t_k.html">ctk</a> = <a class="code hl_namespace" href="namespace_chimera_t_k.html">ChimeraTK</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code hl_class" href="class_average_current.html">AverageCurrent</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_chimera_t_k_1_1_application_module.html">ctk::ApplicationModule</a> {</div>
<div class="line">  <span class="keyword">using </span>ctk::ApplicationModule::ApplicationModule;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Take the heaterCurrent from the Controller module as an input</span></div>
<div class="line">  <a class="code hl_struct" href="struct_chimera_t_k_1_1_scalar_push_input.html">ctk::ScalarPushInput&lt;float&gt;</a> current{<span class="keyword">this</span>, <span class="stringliteral">&quot;../Controller/heatingCurrent&quot;</span>, <span class="stringliteral">&quot;mA&quot;</span>, <span class="stringliteral">&quot;Actuator output of the controller&quot;</span>};</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_struct" href="struct_chimera_t_k_1_1_scalar_output.html">ctk::ScalarOutput&lt;float&gt;</a> currentAveraged{<span class="keyword">this</span>, <span class="stringliteral">&quot;heatingCurrentAveraged&quot;</span>, <span class="stringliteral">&quot;mA&quot;</span>, <span class="stringliteral">&quot;Averaged heating current&quot;</span>};</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> mainLoop() <span class="keyword">override</span>;</div>
<div class="line">};</div>
<div class="ttc" id="aclass_average_current_html"><div class="ttname"><a href="class_average_current.html">AverageCurrent</a></div><div class="ttdoc">[Snippet: Class Definition]</div><div class="ttdef"><b>Definition</b> <a href="_average_current_8h_source.html#l00019">AverageCurrent.h:19</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="example_include_Controller_h"></a>
include/Controller.h</h2>
<div class="fragment"><div class="line"><span class="comment">// SPDX-FileCopyrightText: Deutsches Elektronen-Synchrotron DESY, MSK, ChimeraTK Project &lt;chimeratk-support@desy.de&gt;</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: LGPL-3.0-or-later</span></div>
<div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This example is explained as part of the \ref conceptualOverview. Please refere there for step-by-step explanations.</span></div>
<div class="line"><span class="comment"> * Reading the full example might not be a good starting point for learning ApplicationCore as it can be overwelming</span></div>
<div class="line"><span class="comment"> * and lacks important background information.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Please ignore all comments of the format &quot;//! [some name]&quot;, those are used for Doxygen to include code snippets in</span></div>
<div class="line"><span class="comment"> * the documentation pages.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;ChimeraTK/ApplicationCore/ApplicationCore.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_chimera_t_k.html">ctk</a> = <a class="code hl_namespace" href="namespace_chimera_t_k.html">ChimeraTK</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code hl_class" href="class_controller.html">Controller</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_chimera_t_k_1_1_application_module.html">ctk::ApplicationModule</a> {</div>
<div class="line">  <span class="keyword">using </span>ctk::ApplicationModule::ApplicationModule;</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_struct" href="struct_chimera_t_k_1_1_scalar_poll_input.html">ctk::ScalarPollInput&lt;float&gt;</a> temperatureSetpoint{</div>
<div class="line">      <span class="keyword">this</span>, <span class="stringliteral">&quot;temperatureSetpoint&quot;</span>, <span class="stringliteral">&quot;degC&quot;</span>, <span class="stringliteral">&quot;Setpoint for the temperature controller&quot;</span>};</div>
<div class="line">  <a class="code hl_struct" href="struct_chimera_t_k_1_1_scalar_push_input.html">ctk::ScalarPushInput&lt;float&gt;</a> temperatureReadback{</div>
<div class="line">      <span class="keyword">this</span>, <span class="stringliteral">&quot;temperatureReadback&quot;</span>, <span class="stringliteral">&quot;degC&quot;</span>, <span class="stringliteral">&quot;Actual temperature used as controller input&quot;</span>};</div>
<div class="line">  <a class="code hl_struct" href="struct_chimera_t_k_1_1_scalar_output.html">ctk::ScalarOutput&lt;float&gt;</a> heatingCurrent{<span class="keyword">this</span>, <span class="stringliteral">&quot;heatingCurrent&quot;</span>, <span class="stringliteral">&quot;mA&quot;</span>, <span class="stringliteral">&quot;Actuator output of the controller&quot;</span>};</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> mainLoop() <span class="keyword">override</span>;</div>
<div class="line">};</div>
<div class="ttc" id="aclass_controller_html"><div class="ttname"><a href="class_controller.html">Controller</a></div><div class="ttdoc">[Snippet: Class Definition]</div><div class="ttdef"><b>Definition</b> <a href="_controller_8h_source.html#l00019">Controller.h:19</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="example_include_ExampleApp_h"></a>
include/ExampleApp.h</h2>
<div class="fragment"><div class="line"><span class="comment">// SPDX-FileCopyrightText: Deutsches Elektronen-Synchrotron DESY, MSK, ChimeraTK Project &lt;chimeratk-support@desy.de&gt;</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: LGPL-3.0-or-later</span></div>
<div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This example is explained as part of the \ref conceptualOverview. Please refere there for step-by-step explanations.</span></div>
<div class="line"><span class="comment"> * Reading the full example might not be a good starting point for learning ApplicationCore as it can be overwelming</span></div>
<div class="line"><span class="comment"> * and lacks important background information.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Please ignore all comments of the format &quot;//! [some name]&quot;, those are used for Doxygen to include code snippets in</span></div>
<div class="line"><span class="comment"> * the documentation pages.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_average_current_8h.html">AverageCurrent.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_controller_8h.html">Controller.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_setpoint_ramp_8h.html">SetpointRamp.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;ChimeraTK/ApplicationCore/ApplicationCore.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ChimeraTK/ApplicationCore/ConfigReader.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ChimeraTK/ApplicationCore/PeriodicTrigger.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ChimeraTK/ApplicationCore/ScriptedInitialisationHandler.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ChimeraTK/ApplicationCore/VersionInfoProvider.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_chimera_t_k.html">ctk</a> = <a class="code hl_namespace" href="namespace_chimera_t_k.html">ChimeraTK</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code hl_struct" href="class_example_app.html">ExampleApp</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_chimera_t_k_1_1_application.html">ctk::Application</a> {</div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">  <span class="keyword">using </span>ctk::Application::Application;</div>
<div class="line">  <a class="code hl_function" href="class_example_app.html#a496387672eeb08223ce159afc3ef7443">~ExampleApp</a>() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">private</span>:</div>
<div class="line">  <span class="comment">// Set the name of the DMAP file to define the devices. Must be done before instantiating any DeviceModule.</span></div>
<div class="line">  <span class="comment">// Using the application name as a base helps for automated testing against different config files.</span></div>
<div class="line">  <a class="code hl_class" href="class_chimera_t_k_1_1_set_d_map_file_path.html">ctk::SetDMapFilePath</a> dmapPath{<a class="code hl_function" href="class_chimera_t_k_1_1_entity_owner.html#a081a3af228567c88d8f01e923564ea34">getName</a>() + <span class="stringliteral">&quot;.dmap&quot;</span>};</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Provide version information from the `CMakeLists.txt` as process variables</span></div>
<div class="line">  <span class="comment">// Apart from the line below and the inclusion of the</span></div>
<div class="line">  <span class="comment">// `#include &lt;ChimeraTK/ApplicationCore/VersionInfoProvider.h&gt;` line,</span></div>
<div class="line">  <span class="comment">// The server is also expected to have a module named &quot;Application&quot;</span></div>
<div class="line">  <span class="comment">// with a variable named &quot;configPatchVersion&quot; of type &quot;int32&quot; in its &quot;config.xml&quot; file.</span></div>
<div class="line">  <a class="code hl_class" href="class_chimera_t_k_1_1_version_info_provider.html">ctk::VersionInfoProvider</a> vip{<span class="keyword">this</span>};</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Periodic trigger used to readout data from the device periodically.</span></div>
<div class="line">  <a class="code hl_struct" href="struct_chimera_t_k_1_1_periodic_trigger.html">ctk::PeriodicTrigger</a> timer{<span class="keyword">this</span>, <span class="stringliteral">&quot;Timer&quot;</span>, <span class="stringliteral">&quot;Periodic timer for the controller&quot;</span>};</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Publish the content of the device &quot;oven&quot; defined in the DMAP file to the control system and to the application</span></div>
<div class="line">  <span class="comment">// modules. The &quot;tick&quot; output of the PeriodicTimer &quot;Timer&quot; defined above is used as a readout trigger (for all</span></div>
<div class="line">  <span class="comment">// poll-typed device registers).</span></div>
<div class="line">  <a class="code hl_class" href="class_chimera_t_k_1_1_device_module.html">ctk::DeviceModule</a> oven{<span class="keyword">this</span>, <span class="stringliteral">&quot;oven&quot;</span>, <span class="stringliteral">&quot;/Timer/tick&quot;</span>};</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Initialisation handler: execute Python script to initialise oven device</span></div>
<div class="line">  <a class="code hl_struct" href="struct_chimera_t_k_1_1_scripted_init_handler.html">ctk::ScriptedInitHandler</a> <a class="code hl_namespace" href="namespaceoven_init.html">ovenInit</a>{<span class="keyword">this</span>, <span class="stringliteral">&quot;ovenInit&quot;</span>, <span class="stringliteral">&quot;Initialisation of oven device&quot;</span>, <span class="stringliteral">&quot;./ovenInit.py&quot;</span>, oven};</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">struct </span>ControlUnit : <a class="code hl_class" href="class_chimera_t_k_1_1_module_group.html">ctk::ModuleGroup</a> {</div>
<div class="line">    <span class="keyword">using </span>ctk::ModuleGroup::ModuleGroup;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Instantiate the temperature controller module</span></div>
<div class="line">    <a class="code hl_class" href="class_controller.html">Controller</a> controller{<span class="keyword">this</span>, <span class="stringliteral">&quot;Controller&quot;</span>, <span class="stringliteral">&quot;The temperature controller&quot;</span>};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Instantiate the heater current averaging module</span></div>
<div class="line">    <a class="code hl_class" href="class_average_current.html">AverageCurrent</a> averageCurrent{<span class="keyword">this</span>, <span class="stringliteral">&quot;AverageCurrent&quot;</span>, <span class="stringliteral">&quot;Provide averaged heater current&quot;</span>};</div>
<div class="line">  };</div>
<div class="line">  ControlUnit controlUnit{<span class="keyword">this</span>, <span class="stringliteral">&quot;ControlUnit&quot;</span>, <span class="stringliteral">&quot;Unit for controlling the oven temperature&quot;</span>};</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Optionally instantiate the automated setpoint ramping module</span></div>
<div class="line">  <a class="code hl_class" href="class_setpoint_ramp.html">SetpointRamp</a> ramp{<a class="code hl_function" href="class_chimera_t_k_1_1_application.html#a1c24a9655257070ef1100ffcbaef5bf8">getConfigReader</a>().<a class="code hl_function" href="class_chimera_t_k_1_1_config_reader.html#ad2b1bb3c5c4a974bce539fc4cd194793">get</a>&lt;ChimeraTK::Boolean&gt;(<span class="stringliteral">&quot;Configuration/enableSetpointRamping&quot;</span>) ?</div>
<div class="line">          <a class="code hl_class" href="class_setpoint_ramp.html">SetpointRamp</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;SetpointRamp&quot;</span>, <span class="stringliteral">&quot;Slow ramping of temperator setpoint&quot;</span>) :</div>
<div class="line">          <a class="code hl_class" href="class_setpoint_ramp.html">SetpointRamp</a>()};</div>
<div class="line">};</div>
<div class="ttc" id="a_average_current_8h_html"><div class="ttname"><a href="_average_current_8h.html">AverageCurrent.h</a></div></div>
<div class="ttc" id="a_controller_8h_html"><div class="ttname"><a href="_controller_8h.html">Controller.h</a></div></div>
<div class="ttc" id="a_setpoint_ramp_8h_html"><div class="ttname"><a href="_setpoint_ramp_8h.html">SetpointRamp.h</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_application_html"><div class="ttname"><a href="class_chimera_t_k_1_1_application.html">ChimeraTK::Application</a></div><div class="ttdef"><b>Definition</b> <a href="_application_8h_source.html#l00048">Application.h:48</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_application_html_a1c24a9655257070ef1100ffcbaef5bf8"><div class="ttname"><a href="class_chimera_t_k_1_1_application.html#a1c24a9655257070ef1100ffcbaef5bf8">ChimeraTK::Application::getConfigReader</a></div><div class="ttdeci">ConfigReader &amp; getConfigReader()</div><div class="ttdef"><b>Definition</b> <a href="_application_8h_source.html#l00192">Application.h:192</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_config_reader_html_ad2b1bb3c5c4a974bce539fc4cd194793"><div class="ttname"><a href="class_chimera_t_k_1_1_config_reader.html#ad2b1bb3c5c4a974bce539fc4cd194793">ChimeraTK::ConfigReader::get</a></div><div class="ttdeci">const T &amp; get(const std::string &amp;variableName) const</div><div class="ttdoc">Get value for given configuration variable.</div><div class="ttdef"><b>Definition</b> <a href="_config_reader_8h_source.html#l00249">ConfigReader.h:249</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_device_module_html"><div class="ttname"><a href="class_chimera_t_k_1_1_device_module.html">ChimeraTK::DeviceModule</a></div><div class="ttdef"><b>Definition</b> <a href="_device_module_8h_source.html#l00020">DeviceModule.h:20</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_entity_owner_html_a081a3af228567c88d8f01e923564ea34"><div class="ttname"><a href="class_chimera_t_k_1_1_entity_owner.html#a081a3af228567c88d8f01e923564ea34">ChimeraTK::EntityOwner::getName</a></div><div class="ttdeci">const std::string &amp; getName() const</div><div class="ttdoc">Get the name of the module instance.</div><div class="ttdef"><b>Definition</b> <a href="_entity_owner_8h_source.html#l00059">EntityOwner.h:59</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_module_group_html"><div class="ttname"><a href="class_chimera_t_k_1_1_module_group.html">ChimeraTK::ModuleGroup</a></div><div class="ttdef"><b>Definition</b> <a href="_module_group_8h_source.html#l00016">ModuleGroup.h:16</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_set_d_map_file_path_html"><div class="ttname"><a href="class_chimera_t_k_1_1_set_d_map_file_path.html">ChimeraTK::SetDMapFilePath</a></div><div class="ttdoc">Helper class to set the DMAP file path.</div><div class="ttdef"><b>Definition</b> <a href="_device_module_8h_source.html#l00094">DeviceModule.h:94</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_version_info_provider_html"><div class="ttname"><a href="class_chimera_t_k_1_1_version_info_provider.html">ChimeraTK::VersionInfoProvider</a></div><div class="ttdoc">This module can be added to applications to provide version information from the CMakeLists....</div><div class="ttdef"><b>Definition</b> <a href="_version_info_provider_8h_source.html#l00023">VersionInfoProvider.h:23</a></div></div>
<div class="ttc" id="aclass_example_app_html"><div class="ttname"><a href="class_example_app.html">ExampleApp</a></div><div class="ttdoc">[Snippet: Class Definition Start]</div><div class="ttdef"><b>Definition</b> <a href="_example_app_8h_source.html#l00027">ExampleApp.h:27</a></div></div>
<div class="ttc" id="aclass_example_app_html_a496387672eeb08223ce159afc3ef7443"><div class="ttname"><a href="class_example_app.html#a496387672eeb08223ce159afc3ef7443">ExampleApp::~ExampleApp</a></div><div class="ttdeci">~ExampleApp() override</div><div class="ttdoc">[Snippet: Destructor]</div><div class="ttdef"><b>Definition</b> <a href="_example_app_8cc_source.html#l00018">ExampleApp.cc:18</a></div></div>
<div class="ttc" id="anamespaceoven_init_html"><div class="ttname"><a href="namespaceoven_init.html">ovenInit</a></div><div class="ttdef"><b>Definition</b> <a href="oven_init_8py_source.html#l00001">ovenInit.py:1</a></div></div>
<div class="ttc" id="astruct_chimera_t_k_1_1_periodic_trigger_html"><div class="ttname"><a href="struct_chimera_t_k_1_1_periodic_trigger.html">ChimeraTK::PeriodicTrigger</a></div><div class="ttdoc">Simple periodic trigger that fires a variable once per second.</div><div class="ttdef"><b>Definition</b> <a href="_periodic_trigger_8h_source.html#l00016">PeriodicTrigger.h:16</a></div></div>
<div class="ttc" id="astruct_chimera_t_k_1_1_scripted_init_handler_html"><div class="ttname"><a href="struct_chimera_t_k_1_1_scripted_init_handler.html">ChimeraTK::ScriptedInitHandler</a></div><div class="ttdoc">Initialisation handler which calls an external application (usually a script), captures its output (b...</div><div class="ttdef"><b>Definition</b> <a href="_scripted_initialisation_handler_8h_source.html#l00034">ScriptedInitialisationHandler.h:34</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="example_src"></a>
src</h1>
<h2><a class="anchor" id="example_src_SetpointRamp_cc"></a>
src/AutomSetpointRampation.cc</h2>
<div class="fragment"><div class="line"><span class="comment">// SPDX-FileCopyrightText: Deutsches Elektronen-Synchrotron DESY, MSK, ChimeraTK Project &lt;chimeratk-support@desy.de&gt;</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: LGPL-3.0-or-later</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This example is explained as part of the \ref conceptualOverview. Please refere there for step-by-step explanations.</span></div>
<div class="line"><span class="comment"> * Reading the full example might not be a good starting point for learning ApplicationCore as it can be overwelming</span></div>
<div class="line"><span class="comment"> * and lacks important background information.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Please ignore all comments of the format &quot;//! [some name]&quot;, those are used for Doxygen to include code snippets in</span></div>
<div class="line"><span class="comment"> * the documentation pages.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_setpoint_ramp_8h.html">SetpointRamp.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/**********************************************************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> SetpointRamp::mainLoop() {</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">float</span> maxStep = 0.1F;</div>
<div class="line">  <span class="keywordflow">while</span>(<span class="keyword">true</span>) {</div>
<div class="line">    <a class="code hl_function" href="class_chimera_t_k_1_1_module.html#a20b7d1b8fdd6fb84dcfea23e36a27b1a">readAll</a>(); <span class="comment">// waits until trigger received, then read operatorSetpoint</span></div>
<div class="line">    ctrl.actualSetpoint += std::max(std::min(operatorSetpoint - ctrl.actualSetpoint, maxStep), -maxStep);</div>
<div class="line">    <a class="code hl_function" href="class_chimera_t_k_1_1_module.html#ac91e2a2ce01c0616d57050b229cde5bb">writeAll</a>();</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/**********************************************************************************************************************/</span></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_module_html_a20b7d1b8fdd6fb84dcfea23e36a27b1a"><div class="ttname"><a href="class_chimera_t_k_1_1_module.html#a20b7d1b8fdd6fb84dcfea23e36a27b1a">ChimeraTK::Module::readAll</a></div><div class="ttdeci">void readAll(bool includeReturnChannels=false)</div><div class="ttdoc">Read all readable variables in the group.</div><div class="ttdef"><b>Definition</b> <a href="_module_8cc_source.html#l00072">Module.cc:72</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_module_html_ac91e2a2ce01c0616d57050b229cde5bb"><div class="ttname"><a href="class_chimera_t_k_1_1_module.html#ac91e2a2ce01c0616d57050b229cde5bb">ChimeraTK::Module::writeAll</a></div><div class="ttdeci">void writeAll(bool includeReturnChannels=false)</div><div class="ttdoc">Just call write() on all writable variables in the group.</div><div class="ttdef"><b>Definition</b> <a href="_module_8cc_source.html#l00157">Module.cc:157</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="example_src_AverageCurrent_cc"></a>
src/AverageCurrent.cc</h2>
<div class="fragment"><div class="line"><span class="comment">// SPDX-FileCopyrightText: Deutsches Elektronen-Synchrotron DESY, MSK, ChimeraTK Project &lt;chimeratk-support@desy.de&gt;</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: LGPL-3.0-or-later</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_average_current_8h.html">AverageCurrent.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This example is explained as part of the \ref conceptualOverview. Please refere there for step-by-step explanations.</span></div>
<div class="line"><span class="comment"> * Reading the full example might not be a good starting point for learning ApplicationCore as it can be overwelming</span></div>
<div class="line"><span class="comment"> * and lacks important background information.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Please ignore all comments of the format &quot;//! [some name]&quot;, those are used for Doxygen to include code snippets in</span></div>
<div class="line"><span class="comment"> * the documentation pages.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/**********************************************************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> AverageCurrent::mainLoop() {</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">float</span> coeff = 0.1;</div>
<div class="line">  currentAveraged.<a class="code hl_function" href="class_chimera_t_k_1_1_scalar_accessor.html#aa4a256db36e0927b6ac89138e921fc02">setAndWrite</a>(current); <span class="comment">// initialise currentAveraged with initial value</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span>(<span class="keyword">true</span>) {</div>
<div class="line">    current.read();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Often, it can be considered a good practise to only write values if they have actually changed. This will</span></div>
<div class="line">    <span class="comment">// prevent subsequent computations from running unneccessarily. On the other hand, it may prevent receivers from</span></div>
<div class="line">    <span class="comment">// getting a consistent &quot;snapshot&quot; for each trigger. This has to be decided case by case.</span></div>
<div class="line">    currentAveraged.<a class="code hl_function" href="class_chimera_t_k_1_1_scalar_accessor.html#a5eeff99021076ad757f3014219964d18">writeIfDifferent</a>((1 - coeff) * currentAveraged + coeff * current);</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/**********************************************************************************************************************/</span></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_scalar_accessor_html_a5eeff99021076ad757f3014219964d18"><div class="ttname"><a href="class_chimera_t_k_1_1_scalar_accessor.html#a5eeff99021076ad757f3014219964d18">ChimeraTK::ScalarAccessor::writeIfDifferent</a></div><div class="ttdeci">void writeIfDifferent(UserType newValue, VersionNumber versionNumber, DataValidity validity)=delete</div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_scalar_accessor_html_aa4a256db36e0927b6ac89138e921fc02"><div class="ttname"><a href="class_chimera_t_k_1_1_scalar_accessor.html#aa4a256db36e0927b6ac89138e921fc02">ChimeraTK::ScalarAccessor::setAndWrite</a></div><div class="ttdeci">void setAndWrite(UserType newValue, VersionNumber versionNumber)=delete</div></div>
</div><!-- fragment --><h2><a class="anchor" id="example_src_Controller_cc"></a>
src/AutomatiControlleron.cc</h2>
<div class="fragment"><div class="line"><span class="comment">// SPDX-FileCopyrightText: Deutsches Elektronen-Synchrotron DESY, MSK, ChimeraTK Project &lt;chimeratk-support@desy.de&gt;</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: LGPL-3.0-or-later</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_controller_8h.html">Controller.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This example is explained as part of the \ref conceptualOverview. Please refere there for step-by-step explanations.</span></div>
<div class="line"><span class="comment"> * Reading the full example might not be a good starting point for learning ApplicationCore as it can be overwelming</span></div>
<div class="line"><span class="comment"> * and lacks important background information.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Please ignore all comments of the format &quot;//! [some name]&quot;, those are used for Doxygen to include code snippets in</span></div>
<div class="line"><span class="comment"> * the documentation pages.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/**********************************************************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> Controller::mainLoop() {</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">float</span> gain = 100.0F;</div>
<div class="line">  <span class="keywordflow">while</span>(<span class="keyword">true</span>) {</div>
<div class="line">    heatingCurrent = gain * (temperatureSetpoint - temperatureReadback);</div>
<div class="line">    <a class="code hl_function" href="class_chimera_t_k_1_1_module.html#ac91e2a2ce01c0616d57050b229cde5bb">writeAll</a>(); <span class="comment">// writes any outputs</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="class_chimera_t_k_1_1_module.html#a20b7d1b8fdd6fb84dcfea23e36a27b1a">readAll</a>(); <span class="comment">// waits until temperatureReadback updated, then reads temperatureSetpoint</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/**********************************************************************************************************************/</span></div>
</div><!-- fragment --><h2><a class="anchor" id="example_src_ExampleApp_cc"></a>
src/ExampleApp.cc</h2>
<div class="fragment"><div class="line"><span class="comment">// SPDX-FileCopyrightText: Deutsches Elektronen-Synchrotron DESY, MSK, ChimeraTK Project &lt;chimeratk-support@desy.de&gt;</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: LGPL-3.0-or-later</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This example is explained as part of the \ref conceptualOverview. Please refere there for step-by-step explanations.</span></div>
<div class="line"><span class="comment"> * Reading the full example might not be a good starting point for learning ApplicationCore as it can be overwelming</span></div>
<div class="line"><span class="comment"> * and lacks important background information.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Please ignore all comments of the format &quot;//! [some name]&quot;, those are used for Doxygen to include code snippets in</span></div>
<div class="line"><span class="comment"> * the documentation pages.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_example_app_8h.html">ExampleApp.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/**********************************************************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="class_example_app.html#a496387672eeb08223ce159afc3ef7443">ExampleApp::~ExampleApp</a>() {</div>
<div class="line">  <a class="code hl_function" href="class_chimera_t_k_1_1_application.html#acd050c59340807685052276fb053787a">shutdown</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/**********************************************************************************************************************/</span></div>
<div class="ttc" id="a_example_app_8h_html"><div class="ttname"><a href="_example_app_8h.html">ExampleApp.h</a></div></div>
<div class="ttc" id="aclass_chimera_t_k_1_1_application_html_acd050c59340807685052276fb053787a"><div class="ttname"><a href="class_chimera_t_k_1_1_application.html#acd050c59340807685052276fb053787a">ChimeraTK::Application::shutdown</a></div><div class="ttdeci">void shutdown() override</div><div class="ttdoc">This will remove the global pointer to the instance and allows creating another instance afterwards.</div><div class="ttdef"><b>Definition</b> <a href="_application_8cc_source.html#l00209">Application.cc:209</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="example_src_factory"></a>
src_factory</h1>
<h2><a class="anchor" id=""></a>
</h2>
<div class="fragment"><div class="line"><span class="comment">// SPDX-FileCopyrightText: Deutsches Elektronen-Synchrotron DESY, MSK, ChimeraTK Project &lt;chimeratk-support@desy.de&gt;</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: LGPL-3.0-or-later</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This example is explained as part of the \ref conceptualOverview. Please refere there for step-by-step explanations.</span></div>
<div class="line"><span class="comment"> * Reading the full example might not be a good starting point for learning ApplicationCore as it can be overwelming</span></div>
<div class="line"><span class="comment"> * and lacks important background information.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Please ignore all comments of the format &quot;//! [some name]&quot;, those are used for Doxygen to include code snippets in</span></div>
<div class="line"><span class="comment"> * the documentation pages.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_example_app_8h.html">ExampleApp.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;ChimeraTK/ApplicationCore/EnableXMLGenerator.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/**********************************************************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> ctk::ApplicationFactory&lt;ExampleApp&gt; appFactory(<span class="stringliteral">&quot;demo_example&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/**********************************************************************************************************************/</span></div>
</div><!-- fragment --><h1><a class="anchor" id="example_config"></a>
config</h1>
<h2><a class="anchor" id=""></a>
</h2>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">configuration</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Configuration&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">variable</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;enableSetpointRamping&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;boolean&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;false&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">variable</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;heaterMode&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;uint8&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;2&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">module</span>&gt;</div>
<div class="line">  <span class="comment">&lt;!-- this defines user-defined python application modules to load at server start.</span></div>
<div class="line"><span class="comment">    List all your python modules as &lt;module&gt;. In our case, userAppModules.py defines a drop-in replacement for SetpointRamp --&gt;</span></div>
<div class="line">  &lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;PythonModules&quot;</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;UserAppModules&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">variable</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;path&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;string&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;userAppModules&quot;</span> /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">module</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">module</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Information&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">variable</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ovenName&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;string&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;Cookie Oven 42&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">module</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Timer&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">variable</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;period&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;uint32&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;500&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">module</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Application&quot;</span>&gt;</div>
<div class="line">    <span class="comment">&lt;!--</span></div>
<div class="line"><span class="comment">      The value of configPatchVersion is used by the VersionInfoProvider module.</span></div>
<div class="line"><span class="comment">      67 is only used as an example and should be changed when used as a template.</span></div>
<div class="line"><span class="comment">    --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">variable</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;configPatchVersion&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;int32&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;67&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">module</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;/<span class="keywordtype">configuration</span>&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id=""></a>
</h2>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">device_server</span> <span class="keyword">xmlns</span>=<span class="stringliteral">&quot;https://github.com/ChimeraTK/ControlSystemAdapter-DoocsAdapter&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">location</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;DEMO&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">import</span>&gt;/&lt;/<span class="keywordtype">import</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">location</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">device_server</span>&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="example_config_demo_example_conf"></a>
config/demo_example.conf</h2>
<div class="fragment"><div class="line"># Conf file created at 17:08.38 13. Jun. 2016</div>
<div class="line"># eq_fct_type&#39;s are defined in eq_fct_code.h</div>
<div class="line"> </div>
<div class="line">eq_conf: </div>
<div class="line"> </div>
<div class="line">oper_uid:       -1</div>
<div class="line">oper_gid:       422</div>
<div class="line">xpert_uid:      0</div>
<div class="line">xpert_gid:      0</div>
<div class="line">ring_buffer:    10000</div>
<div class="line">memory_buffer:  500</div>
<div class="line"> </div>
<div class="line">eq_fct_name:    &quot;NODENAME._SVR&quot;</div>
<div class="line">eq_fct_type:    1</div>
<div class="line">{</div>
<div class="line">SVR.NAME:       &quot;NODENAME._SVR&quot;</div>
<div class="line">STS:    0x1c</div>
<div class="line">STS.ERROR:      0</div>
<div class="line">STS.NEWERROR:   1</div>
<div class="line">STS.ERRORMASK:          1</div>
<div class="line">STS.ONLINE:     1</div>
<div class="line">ERROR.STR:      0 0 0 1078761493 &quot;&quot;</div>
<div class="line">SYS_MASK:       1</div>
<div class="line">FCT_CODE:       1</div>
<div class="line">FCT_PANEL:      &quot;&quot;</div>
<div class="line">X_POS:          0</div>
<div class="line">Z_POS:          0</div>
<div class="line">Z_POS.STRING:   &quot;&quot;</div>
<div class="line">DEVICE.INFO:    235672 0 0 0 &quot;Device OK&quot;</div>
<div class="line">MESSAGE:        &quot;&quot;</div>
<div class="line">LAST_UPDATE:    1112798768  350  0  0</div>
<div class="line">LAST_USR1:      0  0  0  0</div>
<div class="line">SVR.ALIAS:      0</div>
<div class="line">SVR.ARCFLUSH:   0</div>
<div class="line">SVR.ARCFLUSH_B:         0</div>
<div class="line">SVR.UPDATE:     1465830518</div>
<div class="line">SVR.RATE:       1  0  0  0</div>
<div class="line">SVR.RESIZE:     200</div>
<div class="line">SVR.FILE:       &quot;demoApp.conf&quot;</div>
<div class="line">SVR.DESC:       &quot;&quot;</div>
<div class="line">SVR.PROGRAMMER:         &quot;mhier&quot;</div>
<div class="line">SVR.XMLFILE:    &quot;&quot;</div>
<div class="line">SVR.ERRORLOG:   &quot;/doocs/nodename/server/InstaCoSADevExample_server/InstaCoSADevExample_server.log&quot;</div>
<div class="line">SVR.STORE.RATE:         10</div>
<div class="line">SVR.STORE.AUTO:         4</div>
<div class="line">SVR.HOST_NAME:          &quot;mskpcx19821&quot;</div>
<div class="line">SVR.PROCESSNAME:        &quot;demoApp&quot;</div>
<div class="line">SVR.RPC_NUMBER:         610498009</div>
<div class="line">SVR.STARTTIME:          1465830430</div>
<div class="line">SVR.LIBINFO:    &quot;18.10.6&quot;</div>
<div class="line">SVR.LIBDATE:    &quot;Jun  2 13:38&quot;</div>
<div class="line">SVR.WDADDR:     &quot;&quot;</div>
<div class="line">SVR.CONTR:      0x0</div>
<div class="line">SVR.MUST_RUN:   0</div>
<div class="line">SVR.STOP_SVR:   0</div>
<div class="line">SVR.START_CMD:          &quot;&quot;</div>
<div class="line">SVR.RPC_CALL_TIME.COMMENT:      &quot;Time per Call&quot;</div>
<div class="line">SVR.RPC_CALL_TIME.EGU:          1 1 100000 0 &quot;rate&quot;</div>
<div class="line">SVR.RPC_CALL_TIME.XEGU:         0 0 100 0 &quot;ms&quot;</div>
<div class="line">SVR.UPDATE_TIME.COMMENT:        &quot;Time per Update&quot;</div>
<div class="line">SVR.UPDATE_TIME.EGU:    1 1 100000 0 &quot;rate&quot;</div>
<div class="line">SVR.UPDATE_TIME.XEGU:   0 0 100 0 &quot;ms&quot;</div>
<div class="line">SVR.USR1_TIME.COMMENT:          &quot;run time of SIGUSR1&quot;</div>
<div class="line">SVR.USR1_TIME.EGU:      1 1 1e+06 1427728880 &quot;counts&quot;</div>
<div class="line">SVR.USR1_TIME.XEGU:     0 0 100 1427728880 &quot;ms&quot;</div>
<div class="line">SVR.USR1_PERIOD.COMMENT:        &quot;time between SIGUSR1&quot;</div>
<div class="line">SVR.USR1_PERIOD.EGU:    1 1 1e+06 1427728880 &quot;counts&quot;</div>
<div class="line">SVR.USR1_PERIOD.XEGU:   0 0 500 1427728880 &quot;ms&quot;</div>
<div class="line">SVR.ARCH_GET_TIME.COMMENT:      &quot;time per archiver get&quot;</div>
<div class="line">SVR.ARCH_GET_TIME.EGU:          1 1 1e+06 1459338630 &quot;counts&quot;</div>
<div class="line">SVR.ARCH_GET_TIME.XEGU:         0 0 100 1459338630 &quot;ms&quot;</div>
<div class="line">SVR.LAFL:       0</div>
<div class="line">SVR.ERROR_COUNT:        0</div>
<div class="line">DEVICE.ONLINE:          1</div>
<div class="line">DEVICE.OFFLINE:         0</div>
<div class="line">SVR.DEVMAX:     0</div>
<div class="line">SVR.TINERUN:    0</div>
<div class="line">SVR.TINEVERS:   &quot;4.05.0009&quot;</div>
<div class="line">SVR.TINEPREF:   &quot;&quot;</div>
<div class="line">SVR.TINESUFF:   &quot;&quot;</div>
<div class="line">SVR.TINE_DBG:   0</div>
<div class="line">SVR.TINE_LOG:   0</div>
<div class="line">SVR.TINE_FEC:   0 0 0 0 &quot;&quot;</div>
<div class="line">SVR.TINE_PORT:          0</div>
<div class="line">SVR.TINE_MTU:   1472</div>
<div class="line">SVR.TINE_CTSZ:          32</div>
<div class="line">SVR.TINE_MCTTL:         16</div>
<div class="line">SVR.TINE_BLIM:          1000</div>
<div class="line">SVR.TINE_CDLY:          20</div>
<div class="line">SVR.TINE_GROUP:         0</div>
<div class="line">SVR.FACILITY:   &quot;TEST.DOOCS&quot;</div>
<div class="line">SVR.DEVICE:     &quot;InstaCoSADevExample&quot;</div>
<div class="line">T_ZERO:         700</div>
<div class="line">SVR.BPN:        0</div>
<div class="line">SVR.SPR:        0</div>
<div class="line">}</div>
<div class="line">#No need to put application locations if you don&#39;t need variables content as persistency layer.</div>
<div class="line">#They will be auto-generated.</div>
</div><!-- fragment --><h2><a class="anchor" id="example_config_demo_example_dmap"></a>
config/demo_example.dmap</h2>
<div class="fragment"><div class="line">device    (sharedMemoryDummy:0?map=DemoDummy.map)</div>
<div class="line">oven      (logicalNameMap?map=oven.xlmap)</div>
</div><!-- fragment --><h2><a class="anchor" id="example_config_DemoDummy_map"></a>
config/DemoDummy.map</h2>
<div class="fragment"><div class="line"># name                    nr of elements   address  size   bar    width   fracbits    signed    R/W</div>
<div class="line">HEATER.MODE               1                0        4      0      2       0           0         RW</div>
<div class="line">HEATER.CURRENT_SET        1                4        4      0      32      16          0         RW</div>
<div class="line">HEATER.CURRENT_READBACK   1                8        4      0      32      16          0         RO</div>
<div class="line">SENSORS.TEMPERATURE1      1                16       4      0      32      16          0         RO</div>
<div class="line">SENSORS.TEMPERATURE2      1                20       4      0      32      16          0         RO</div>
<div class="line">SENSORS.TEMPERATURE3      1                24       4      0      32      16          0         RO</div>
<div class="line">SENSORS.TEMPERATURE4      1                28       4      0      32      16          0         RO</div>
<div class="line">BOARD.RESET_N             1                32       4      0      1       0           0         RW</div>
<div class="line">BOARD.GPIO_OUT0           1                36       4      0      1       0           0         RW</div>
</div><!-- fragment --><h2><a class="anchor" id="example_config_oven_xlmap"></a>
config/oven.xlmap</h2>
<div class="fragment"><div class="line">&lt;logicalNameMap&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;module name=&quot;Configuration&quot;&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;redirectedRegister name=&quot;heaterMode&quot;&gt;</div>
<div class="line">      &lt;targetDevice&gt;device&lt;/targetDevice&gt;</div>
<div class="line">      &lt;targetRegister&gt;HEATER.MODE&lt;/targetRegister&gt;</div>
<div class="line">    &lt;/redirectedRegister&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;redirectedRegister name=&quot;lightOn&quot;&gt;</div>
<div class="line">      &lt;targetDevice&gt;device&lt;/targetDevice&gt;</div>
<div class="line">      &lt;targetRegister&gt;BOARD.GPIO_OUT0&lt;/targetRegister&gt;</div>
<div class="line">    &lt;/redirectedRegister&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;/module&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;module name=&quot;ControlUnit&quot;&gt;</div>
<div class="line">    &lt;module name=&quot;Controller&quot;&gt;</div>
<div class="line"> </div>
<div class="line">      &lt;redirectedRegister name=&quot;heatingCurrent&quot;&gt;</div>
<div class="line">        &lt;targetDevice&gt;device&lt;/targetDevice&gt;</div>
<div class="line">        &lt;targetRegister&gt;HEATER.CURRENT_SET&lt;/targetRegister&gt;</div>
<div class="line">      &lt;/redirectedRegister&gt;</div>
<div class="line"> </div>
<div class="line">      &lt;redirectedRegister name=&quot;temperatureReadback&quot;&gt;</div>
<div class="line">        &lt;targetDevice&gt;device&lt;/targetDevice&gt;</div>
<div class="line">        &lt;targetRegister&gt;SENSORS.TEMPERATURE1&lt;/targetRegister&gt;</div>
<div class="line">      &lt;/redirectedRegister&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;/module&gt;</div>
<div class="line">  &lt;/module&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;module name=&quot;Monitoring&quot;&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;redirectedRegister name=&quot;heatingCurrent&quot;&gt;</div>
<div class="line">      &lt;targetDevice&gt;device&lt;/targetDevice&gt;</div>
<div class="line">      &lt;targetRegister&gt;HEATER.CURRENT_READBACK&lt;/targetRegister&gt;</div>
<div class="line">    &lt;/redirectedRegister&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;redirectedRegister name=&quot;temperatureOvenTop&quot;&gt;</div>
<div class="line">      &lt;targetDevice&gt;device&lt;/targetDevice&gt;</div>
<div class="line">      &lt;targetRegister&gt;SENSORS.TEMPERATURE2&lt;/targetRegister&gt;</div>
<div class="line">    &lt;/redirectedRegister&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;redirectedRegister name=&quot;temperatureOvenBottom&quot;&gt;</div>
<div class="line">      &lt;targetDevice&gt;device&lt;/targetDevice&gt;</div>
<div class="line">      &lt;targetRegister&gt;SENSORS.TEMPERATURE3&lt;/targetRegister&gt;</div>
<div class="line">    &lt;/redirectedRegister&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;redirectedRegister name=&quot;temperatureOutside&quot;&gt;</div>
<div class="line">      &lt;targetDevice&gt;device&lt;/targetDevice&gt;</div>
<div class="line">      &lt;targetRegister&gt;SENSORS.TEMPERATURE4&lt;/targetRegister&gt;</div>
<div class="line">    &lt;/redirectedRegister&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;/module&gt;</div>
<div class="line"> </div>
<div class="line">&lt;/logicalNameMap&gt;</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
