<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mtca4u-MotorDriverCard: Why you need a motor driver card config and how to create it</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ChimeraTK_Logo_whitebg.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mtca4u-MotorDriverCard
   &#160;<span id="projectnumber">01.14.00</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('motor_driver_card_config_docu.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Why you need a motor driver card config and how to create it </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The driver and controller chips on the MD22 need to be configured for each motor. The parameters are stored in an XML file. There is one file per MD22 MotorDriverCard, so one config for two motors. The reason is that there are common registers for both motors on the controller chip, and sometimes there is information of both motors in a single register.</p>
<h1><a class="anchor" id="gui_parameters"></a>
Creating an XML config file</h1>
<p>You can use the <a class="el" href="class_qt_motor_config_calculator.html" title="A widget containing two MotorConfigWidget in a TabWidget, and a write button which write the config t...">QtMotorConfigCalculator</a> to generate a motor config file. You need some information from the motor's data sheet: </p><ul>
<li>The maximum coil current </li>
<li>The number of full steps per turn </li>
<li>The maximum desired speed in RPMs </li>
<li>Does the motor have end switches?</li>
</ul>
<p>If the motor does have end switches, you definitely should use them for safety reasons. However, if the motor does not have end switches you have to disable them because not connected end switches are detected as 'active' and the motor would not move.</p>
<p>The other parameters usually can stay at their default values. The clock frequency if 32 MHz is hard coded in the firmware and probably will never change.</p>
<div class="image">
<img src="QtMotorConfigCalculator00.06.01.png" alt=""/>
</div>
<h1><a class="anchor" id="expert_parameters"></a>
Expert Section: Manually editing the config XML file</h1>
<p>The default parameters are made to work reliably, but operation will probably not be as smooth or efficent as possible with the particular motor and use case. If you want to tweak the parameters according to the TMC429 and TMC260 data sheets, you can manually edit the entries for the corresponding classes derived from <a class="el" href="classmtca4u_1_1_t_m_c260_word.html">mtca4u::TMC260Word</a> and <a class="el" href="classmtca4u_1_1_t_m_c429_input_word.html" title="Structure of a generic single value register of the TMC429 chip.">mtca4u::TMC429InputWord</a>.</p>
<div class="fragment"></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Aug 24 2024 19:10:37 for mtca4u-MotorDriverCard by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
