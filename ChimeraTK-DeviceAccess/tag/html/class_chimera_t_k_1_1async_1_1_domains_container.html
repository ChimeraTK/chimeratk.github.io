<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ChimeraTK-DeviceAccess: ChimeraTK::async::DomainsContainer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ChimeraTK_Logo_whitebg.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ChimeraTK-DeviceAccess
   &#160;<span id="projectnumber">03.15.02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_chimera_t_k_1_1async_1_1_domains_container.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_chimera_t_k_1_1async_1_1_domains_container-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ChimeraTK::async::DomainsContainer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html" title="The DomainsContainer has a container with Domains and is performing actions on all of them.">DomainsContainer</a> has a container with Domains and is performing actions on all of them.  
 <a href="class_chimera_t_k_1_1async_1_1_domains_container.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for ChimeraTK::async::DomainsContainer:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1async_1_1_domains_container__coll__graph.svg" width="100%" height="438"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container_1_1_stop_thread.html">StopThread</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0eeb72749d075766786e7a06b942abfc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a0eeb72749d075766786e7a06b942abfc">~DomainsContainer</a> ()</td></tr>
<tr class="separator:a0eeb72749d075766786e7a06b942abfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457e8d37146999590359f88a1ae57c9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a457e8d37146999590359f88a1ae57c9e">sendExceptions</a> (const std::string &amp;exceptionMessage)</td></tr>
<tr class="memdesc:a457e8d37146999590359f88a1ae57c9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request the sending of exceptions.  <a href="class_chimera_t_k_1_1async_1_1_domains_container.html#a457e8d37146999590359f88a1ae57c9e">More...</a><br /></td></tr>
<tr class="separator:a457e8d37146999590359f88a1ae57c9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad03a05a35621f3103c6c40b05b5b1d88"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#ad03a05a35621f3103c6c40b05b5b1d88">isSendingExceptions</a> ()</td></tr>
<tr class="memdesc:ad03a05a35621f3103c6c40b05b5b1d88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether an exception distribution is started and not completed yet.  <a href="class_chimera_t_k_1_1async_1_1_domains_container.html#ad03a05a35621f3103c6c40b05b5b1d88">More...</a><br /></td></tr>
<tr class="separator:ad03a05a35621f3103c6c40b05b5b1d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f2f2b2ddf058f8d3f6d764eff583e23"><td class="memTemplParams" colspan="2">template&lt;typename BackendType , typename BackendSpecificDataType , typename UserDataType &gt; </td></tr>
<tr class="memitem:a0f2f2b2ddf058f8d3f6d764eff583e23"><td class="memTemplItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1async_1_1_async_n_d_register_accessor.html">AsyncNDRegisterAccessor</a>&lt; UserDataType &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a0f2f2b2ddf058f8d3f6d764eff583e23">subscribe</a> (boost::shared_ptr&lt; BackendType &gt; backend, size_t domainId, bool activate, <a class="el" href="class_chimera_t_k_1_1_register_path.html">RegisterPath</a> name, size_t numberOfWords, size_t wordOffsetInRegister, <a class="el" href="class_chimera_t_k_1_1_access_mode_flags.html">AccessModeFlags</a> flags)</td></tr>
<tr class="memdesc:a0f2f2b2ddf058f8d3f6d764eff583e23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an accessor from a particular domain.  <a href="class_chimera_t_k_1_1async_1_1_domains_container.html#a0f2f2b2ddf058f8d3f6d764eff583e23">More...</a><br /></td></tr>
<tr class="separator:a0f2f2b2ddf058f8d3f6d764eff583e23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5224bc4492c28d37d6d0928b9eeb6690"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html">Domain</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a5224bc4492c28d37d6d0928b9eeb6690">getDomain</a> (size_t key)</td></tr>
<tr class="memdesc:a5224bc4492c28d37d6d0928b9eeb6690"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the shared pointer to the <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html" title="The Domain is the thread-safe entry point for each distribution tree.">Domain</a> for a key.  <a href="class_chimera_t_k_1_1async_1_1_domains_container.html#a5224bc4492c28d37d6d0928b9eeb6690">More...</a><br /></td></tr>
<tr class="separator:a5224bc4492c28d37d6d0928b9eeb6690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a498957143f37bb0c7f5dc344295e7fa0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a498957143f37bb0c7f5dc344295e7fa0">forEach</a> (const std::function&lt; void(size_t, boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html">Domain</a> &gt; &amp;)&gt; &amp;executeMe)</td></tr>
<tr class="memdesc:a498957143f37bb0c7f5dc344295e7fa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate all Domains under the container lock.  <a href="class_chimera_t_k_1_1async_1_1_domains_container.html#a498957143f37bb0c7f5dc344295e7fa0">More...</a><br /></td></tr>
<tr class="separator:a498957143f37bb0c7f5dc344295e7fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a68a11c5e75e62473d8b374fd3b346e5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a68a11c5e75e62473d8b374fd3b346e5c">distributeExceptions</a> ()</td></tr>
<tr class="memdesc:a68a11c5e75e62473d8b374fd3b346e5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Endless loop executed in the thread.  <a href="class_chimera_t_k_1_1async_1_1_domains_container.html#a68a11c5e75e62473d8b374fd3b346e5c">More...</a><br /></td></tr>
<tr class="separator:a68a11c5e75e62473d8b374fd3b346e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a2af21d74d2475e4c8e2b2d57b5fff03d"><td class="memItemLeft" align="right" valign="top">std::atomic_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a2af21d74d2475e4c8e2b2d57b5fff03d">_isSendingExceptions</a> {false}</td></tr>
<tr class="separator:a2af21d74d2475e4c8e2b2d57b5fff03d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e5b621220e58a0b31c164f513232e10"><td class="memItemLeft" align="right" valign="top">cppext::future_queue&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a3e5b621220e58a0b31c164f513232e10">_startExceptionDistribution</a> {2}</td></tr>
<tr class="separator:a3e5b621220e58a0b31c164f513232e10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d52bde07dac5f582468a0ad760afb3d"><td class="memItemLeft" align="right" valign="top">std::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a7d52bde07dac5f582468a0ad760afb3d">_distributorThread</a></td></tr>
<tr class="separator:a7d52bde07dac5f582468a0ad760afb3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ecc651ddb91a6e8ac75ce70222fd64b"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a5ecc651ddb91a6e8ac75ce70222fd64b">_threadCreationMutex</a></td></tr>
<tr class="separator:a5ecc651ddb91a6e8ac75ce70222fd64b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90cd439b38110e9504ff95aa88fece9c"><td class="memItemLeft" align="right" valign="top">std::atomic_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a90cd439b38110e9504ff95aa88fece9c">_threadIsRunning</a> {false}</td></tr>
<tr class="separator:a90cd439b38110e9504ff95aa88fece9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95767b0f39a104cb3c209254bfb961a2"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a95767b0f39a104cb3c209254bfb961a2">_domainsMutex</a></td></tr>
<tr class="separator:a95767b0f39a104cb3c209254bfb961a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e15b9d3f10555023c43a30799db223f"><td class="memItemLeft" align="right" valign="top">std::map&lt; size_t, boost::weak_ptr&lt; <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html">Domain</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a0e15b9d3f10555023c43a30799db223f">_domains</a></td></tr>
<tr class="separator:a0e15b9d3f10555023c43a30799db223f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html" title="The DomainsContainer has a container with Domains and is performing actions on all of them.">DomainsContainer</a> has a container with Domains and is performing actions on all of them. </p>
<p>The key type to identify the domain is of type size_t, which is the return type of std::hash, so you can easily use the hashes in case the backend uses a different key type.</p>
<p>Sending exceptions is implemented via a thread. <a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#a457e8d37146999590359f88a1ae57c9e" title="Request the sending of exceptions.">sendExceptions()</a> is pushing the exception message into a queue and returns immediately. A distributor thread is waiting for data in the queue and is sending the exceptions in all Domains.</p>
<p>The reason for having a thread is a possible lock order inversion. In the distribution tree, accessor creation must be mutually exclusibe with data distribution, hence locks cannot be avoided. As excaption can occur during data distribution. and backend::setException() is called, this would lead to recursive calls to the distribution tree, which might result in lock order inversions and deadlocks. To avoid this, setException will only put the exception message into the queue and return, allowing the failing distribution call to complete. The exception distribution will then be done by the thread in the <a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html" title="The DomainsContainer has a container with Domains and is performing actions on all of them.">DomainsContainer</a>, after the mutex in the <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html" title="The Domain is the thread-safe entry point for each distribution tree.">Domain</a> is free again. </p>

<p class="definition">Definition at line <a class="el" href="_domains_container_8h_source.html#l00034">34</a> of file <a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0eeb72749d075766786e7a06b942abfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eeb72749d075766786e7a06b942abfc">&#9670;&nbsp;</a></span>~DomainsContainer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ChimeraTK::async::DomainsContainer::~DomainsContainer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_domains_container_8cc_source.html#l00041">41</a> of file <a class="el" href="_domains_container_8cc_source.html">DomainsContainer.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a68a11c5e75e62473d8b374fd3b346e5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68a11c5e75e62473d8b374fd3b346e5c">&#9670;&nbsp;</a></span>distributeExceptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ChimeraTK::async::DomainsContainer::distributeExceptions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Endless loop executed in the thread. </p>

<p class="definition">Definition at line <a class="el" href="_domains_container_8cc_source.html#l00012">12</a> of file <a class="el" href="_domains_container_8cc_source.html">DomainsContainer.cc</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1async_1_1_domains_container_a68a11c5e75e62473d8b374fd3b346e5c_icgraph.svg" width="492" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a498957143f37bb0c7f5dc344295e7fa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a498957143f37bb0c7f5dc344295e7fa0">&#9670;&nbsp;</a></span>forEach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ChimeraTK::async::DomainsContainer::forEach </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; void(size_t, boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html">Domain</a> &gt; &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>executeMe</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate all Domains under the container lock. </p>
<p>Each weak pointer is locked and the argument function is executed if the share_ptr is not nullptr.</p>
<p>The first parameter of the callback function is the domain key, the second a shared pointer to the domain itself. </p>

<p class="definition">Definition at line <a class="el" href="_domains_container_8cc_source.html#l00091">91</a> of file <a class="el" href="_domains_container_8cc_source.html">DomainsContainer.cc</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1async_1_1_domains_container_a498957143f37bb0c7f5dc344295e7fa0_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a5224bc4492c28d37d6d0928b9eeb6690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5224bc4492c28d37d6d0928b9eeb6690">&#9670;&nbsp;</a></span>getDomain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html">Domain</a> &gt; ChimeraTK::async::DomainsContainer::getDomain </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the shared pointer to the <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html" title="The Domain is the thread-safe entry point for each distribution tree.">Domain</a> for a key. </p>
<p>The shared pointer might be nullptr if locking of the weak pointer failed. </p>

<p class="definition">Definition at line <a class="el" href="_domains_container_8cc_source.html#l00082">82</a> of file <a class="el" href="_domains_container_8cc_source.html">DomainsContainer.cc</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1async_1_1_domains_container_a5224bc4492c28d37d6d0928b9eeb6690_icgraph.svg" width="475" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ad03a05a35621f3103c6c40b05b5b1d88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad03a05a35621f3103c6c40b05b5b1d88">&#9670;&nbsp;</a></span>isSendingExceptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ChimeraTK::async::DomainsContainer::isSendingExceptions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether an exception distribution is started and not completed yet. </p>

<p class="definition">Definition at line <a class="el" href="_domains_container_8h_source.html#l00045">45</a> of file <a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1async_1_1_domains_container_ad03a05a35621f3103c6c40b05b5b1d88_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a457e8d37146999590359f88a1ae57c9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a457e8d37146999590359f88a1ae57c9e">&#9670;&nbsp;</a></span>sendExceptions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ChimeraTK::async::DomainsContainer::sendExceptions </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>exceptionMessage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request the sending of exceptions. </p>
<p>This function stores the request and returns immediately. The actual exception distribution is done asynchronously and has not necessarily finished when the function call returns. Use <a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html#ad03a05a35621f3103c6c40b05b5b1d88" title="Check whether an exception distribution is started and not completed yet.">isSendingExceptions()</a> to check whether the exception distribution has finished. </p>

<p class="definition">Definition at line <a class="el" href="_domains_container_8cc_source.html#l00065">65</a> of file <a class="el" href="_domains_container_8cc_source.html">DomainsContainer.cc</a>.</p>

</div>
</div>
<a id="a0f2f2b2ddf058f8d3f6d764eff583e23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f2f2b2ddf058f8d3f6d764eff583e23">&#9670;&nbsp;</a></span>subscribe()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename BackendType , typename BackendSpecificDataType , typename UserDataType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1async_1_1_async_n_d_register_accessor.html">AsyncNDRegisterAccessor</a>&lt; UserDataType &gt; &gt; ChimeraTK::async::DomainsContainer::subscribe </td>
          <td>(</td>
          <td class="paramtype">boost::shared_ptr&lt; BackendType &gt;&#160;</td>
          <td class="paramname"><em>backend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>domainId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>activate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_chimera_t_k_1_1_register_path.html">RegisterPath</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>numberOfWords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>wordOffsetInRegister</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_chimera_t_k_1_1_access_mode_flags.html">AccessModeFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get an accessor from a particular domain. </p>
<p>At the moment the catalogue does not provide enough information to extract the domain ID from the register path. Hence the backend has to do it from its specific catalogue.</p>
<p>If the domain does not exist, it is created while holding the container lock.</p>
<p>The function is templated to three types. The first two parameters, backend type and a BackendSpecificDataType, are needed for the domain creation. The BackendSpecificDataType might vary for different Domains in the same backend. The UserDataType is the data type of the returned accessor.</p>
<p>The backend has to provide a function to get the initial value for that <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html" title="The Domain is the thread-safe entry point for each distribution tree.">Domain</a>. </p><div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> BackendSpecificDataType&gt;</div>
<div class="line">std::pair&lt;BackendSpecificUserType, VersionNumber&gt; getAsyncDomainInitialValue(<span class="keywordtype">size_t</span> asyncDomainId);</div>
</div><!-- fragment --><p> This function is returning the initial value for the domain with the according domainID. If the version number can be determined from the initial value data, the version number is set here. Otherwise the version number must be <a class="el" href="class_chimera_t_k_1_1_version_number.html" title="Class for generating and holding version numbers without exposing a numeric representation.">VersionNumber</a>{nullptr}. If the version number cannot be determined from the initial value <b>do not create a new version number here!</b>. This must happen inside the <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html" title="The Domain is the thread-safe entry point for each distribution tree.">Domain</a> under the <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html" title="The Domain is the thread-safe entry point for each distribution tree.">Domain</a> lock to avoid race conditions.</p>
<p>Parameters for the async <a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html" title="The Domain is the thread-safe entry point for each distribution tree.">Domain</a> creation:</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">backend</td><td>Shared pointer to the exact backend type. As template functions cannot be virtual, we need a pointer of the type that implements getAsyncDomainInitialValue(). </td></tr>
    <tr><td class="paramname">domainId</td><td>The domainId is the key for the container (map). </td></tr>
    <tr><td class="paramname">activate</td><td>Flag whether to activate the async domain if it is created.</td></tr>
  </table>
  </dd>
</dl>
<p>Parameters for the actual accessor subscription:</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The register path of the accessor </td></tr>
    <tr><td class="paramname">numberOfWords</td><td>Entries in the accessor </td></tr>
    <tr><td class="paramname">wordOffsetInRegister</td><td><a class="el" href="class_accessor.html">Accessor</a> starts at an offset </td></tr>
    <tr><td class="paramname">flags</td><td>The access mode flags. They have to include wait_for_new_data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_domains_container_8h_source.html#l00122">122</a> of file <a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1async_1_1_domains_container_a0f2f2b2ddf058f8d3f6d764eff583e23_cgraph.svg" width="492" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7d52bde07dac5f582468a0ad760afb3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d52bde07dac5f582468a0ad760afb3d">&#9670;&nbsp;</a></span>_distributorThread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::thread ChimeraTK::async::DomainsContainer::_distributorThread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_domains_container_8h_source.html#l00109">109</a> of file <a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>.</p>

</div>
</div>
<a id="a0e15b9d3f10555023c43a30799db223f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e15b9d3f10555023c43a30799db223f">&#9670;&nbsp;</a></span>_domains</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;size_t, boost::weak_ptr&lt;<a class="el" href="class_chimera_t_k_1_1async_1_1_domain.html">Domain</a>&gt; &gt; ChimeraTK::async::DomainsContainer::_domains</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_domains_container_8h_source.html#l00116">116</a> of file <a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>.</p>

</div>
</div>
<a id="a95767b0f39a104cb3c209254bfb961a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95767b0f39a104cb3c209254bfb961a2">&#9670;&nbsp;</a></span>_domainsMutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex ChimeraTK::async::DomainsContainer::_domainsMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_domains_container_8h_source.html#l00115">115</a> of file <a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>.</p>

</div>
</div>
<a id="a2af21d74d2475e4c8e2b2d57b5fff03d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2af21d74d2475e4c8e2b2d57b5fff03d">&#9670;&nbsp;</a></span>_isSendingExceptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic_bool ChimeraTK::async::DomainsContainer::_isSendingExceptions {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_domains_container_8h_source.html#l00103">103</a> of file <a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>.</p>

</div>
</div>
<a id="a3e5b621220e58a0b31c164f513232e10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e5b621220e58a0b31c164f513232e10">&#9670;&nbsp;</a></span>_startExceptionDistribution</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cppext::future_queue&lt;std::string&gt; ChimeraTK::async::DomainsContainer::_startExceptionDistribution {2}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_domains_container_8h_source.html#l00108">108</a> of file <a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>.</p>

</div>
</div>
<a id="a5ecc651ddb91a6e8ac75ce70222fd64b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ecc651ddb91a6e8ac75ce70222fd64b">&#9670;&nbsp;</a></span>_threadCreationMutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex ChimeraTK::async::DomainsContainer::_threadCreationMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_domains_container_8h_source.html#l00110">110</a> of file <a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>.</p>

</div>
</div>
<a id="a90cd439b38110e9504ff95aa88fece9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90cd439b38110e9504ff95aa88fece9c">&#9670;&nbsp;</a></span>_threadIsRunning</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic_bool ChimeraTK::async::DomainsContainer::_threadIsRunning {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_domains_container_8h_source.html#l00111">111</a> of file <a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/scratch/dragon/sources/ChimeraTK-DeviceAccess/include/async/<a class="el" href="_domains_container_8h_source.html">DomainsContainer.h</a></li>
<li>/scratch/dragon/sources/ChimeraTK-DeviceAccess/src/async/<a class="el" href="_domains_container_8cc_source.html">DomainsContainer.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_chimera_t_k.html">ChimeraTK</a></li><li class="navelem"><a class="el" href="namespace_chimera_t_k_1_1async.html">async</a></li><li class="navelem"><a class="el" href="class_chimera_t_k_1_1async_1_1_domains_container.html">DomainsContainer</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
