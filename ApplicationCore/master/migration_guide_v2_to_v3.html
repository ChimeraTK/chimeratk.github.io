<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ChimeraTK-ApplicationCore: ApplicationCore 2.x -&gt; 3.0 migration guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ChimeraTK_Logo_whitebg.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ChimeraTK-ApplicationCore
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('migration_guide_v2_to_v3.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ApplicationCore 2.x -&gt; 3.0 migration guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_Migration_Guide_v2_to_v3"></a></p>
<h1><a class="anchor" id="autotoc_md0"></a>
General</h1>
<ul>
<li>Some header files have been removed. Make sure to build against a clean install directory without any stray old header files!</li>
</ul>
<h2><a class="anchor" id="autotoc_md1"></a>
Old-style servers (defineConnections still overridden)</h2>
<ul>
<li>The ControlSystemModule does not exist any more. All PVs are connected to the control system automatically.</li>
<li>Do not use connectTo() and operator&gt;&gt; for individual connections. Connected variables must have same fully qualified name in the directory hierarchy (formerly known as virtual hierarchy).</li>
<li>The DeviceModule works now like the previous ConnectingDeviceModule, i.e. it publishes all registers in its neighbour directory. Use as many DeviceModules as necessary for the same device (e.g. if different triggers are used).</li>
<li>Use fully qualified variable or module names (ModuleGroup, ApplicationModule, VariableGroup) to connect to variables of other modules.</li>
<li>Avoid that technique (point 3) to connect to device registers whose names do not match the application structure. Instead change the logical name mapping file such that it matches the application structure.</li>
<li>Also check points mentioned for new-style servers!</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
New-style servers (no defineConnections)</h2>
<ul>
<li>The DMAP file path needs to be set earlier than before, namely before the first (Connecting)DeviceModule is constructed. Create an instance of <a class="el" href="class_chimera_t_k_1_1_set_d_map_file_path.html" title="Helper class to set the DMAP file path.">ChimeraTK::SetDMapFilePath</a> as first data member of the application to set the path early enough.</li>
<li>Signature of device recovery handlers changed (argument is now of the type ChimeraTK::Device&amp;).</li>
<li>Recommended: Switch from deprecated ConnectingDeviceModule to DeviceModule (type alias for compatibility exists).</li>
<li>Recommended: Switch from HierarchyModifyingGroup and ModifyHierarchy to plain VaraibleGroup and plain accessors, which now accept qualified paths (compatibility layers exist).</li>
<li>Path names of device status variables changed in some cases when using a CDD instead of an alias name, since the name is more strictly stripped of special characters. See <a class="el" href="namespace_chimera_t_k_1_1_utilities.html#a2c953e32766b0b93cfe92fe7f518eac4" title="Convert all characters which are not allowed in variable or module names into underscores.">ChimeraTK::Utilities::stripName()</a> for a function to strip the special characters programmatically.</li>
<li>/Devices/.../deviceBecameFunctional is now of the type ChimeraTK::Void.</li>
<li>When specifying a trigger in DeviceModule constructor that is not part of another typed network (i.e. just connected to the control system), its type wil be ChimeraTK::Void</li>
<li>HierarchyModifyingGroup (now VariableGroup): consecutive slashes are now treated differently, they move to root and are no longer treated just as a single slash. Example: a VariableGroup with the name <code>some/path//with/two/slashes</code> will have the same effect as a VariableGroup <code>/with/two/slashes</code>. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">index</a></li>
    <li class="footer">Generated on Fri Apr 28 2023 03:55:48 for ChimeraTK-ApplicationCore by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
