<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ChimeraTK-DeviceAccess: ChimeraTK::AsyncDomainsContainer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ChimeraTK_Logo_whitebg.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ChimeraTK-DeviceAccess
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_chimera_t_k_1_1_async_domains_container.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_chimera_t_k_1_1_async_domains_container-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ChimeraTK::AsyncDomainsContainer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="class_chimera_t_k_1_1_async_domains_container.html" title="The AsyncDomainsContainer has a container with AsyncDomains and is performing actions on all of them.">AsyncDomainsContainer</a> has a container with AsyncDomains and is performing actions on all of them.  
 <a href="class_chimera_t_k_1_1_async_domains_container.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for ChimeraTK::AsyncDomainsContainer:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1_async_domains_container__coll__graph.svg" width="100%" height="434"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container_1_1_stop_thread.html">StopThread</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a65abe7f110839abaa0ec8a4fa62499df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a65abe7f110839abaa0ec8a4fa62499df">~AsyncDomainsContainer</a> ()</td></tr>
<tr class="separator:a65abe7f110839abaa0ec8a4fa62499df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8b9415c10769b6c384b920f99a9666a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#ad8b9415c10769b6c384b920f99a9666a">sendExceptions</a> (const std::string &amp;exceptionMessage)</td></tr>
<tr class="memdesc:ad8b9415c10769b6c384b920f99a9666a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request the sending of exceptions.  <a href="class_chimera_t_k_1_1_async_domains_container.html#ad8b9415c10769b6c384b920f99a9666a">More...</a><br /></td></tr>
<tr class="separator:ad8b9415c10769b6c384b920f99a9666a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4432ecd6be42e79ade8ecf5acdda575d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a4432ecd6be42e79ade8ecf5acdda575d">isSendingExceptions</a> ()</td></tr>
<tr class="memdesc:a4432ecd6be42e79ade8ecf5acdda575d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether an exception distribution is started and not completed yet.  <a href="class_chimera_t_k_1_1_async_domains_container.html#a4432ecd6be42e79ade8ecf5acdda575d">More...</a><br /></td></tr>
<tr class="separator:a4432ecd6be42e79ade8ecf5acdda575d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4034ea7296d15014a6d6e14b675bacfd"><td class="memTemplParams" colspan="2">template&lt;typename BackendType , typename BackendSpecificDataType &gt; </td></tr>
<tr class="memitem:a4034ea7296d15014a6d6e14b675bacfd"><td class="memTemplItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1_async_domain_impl.html">AsyncDomainImpl</a>&lt; BackendSpecificDataType &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a4034ea7296d15014a6d6e14b675bacfd">getOrCreateAsyncDomain</a> (boost::shared_ptr&lt; BackendType &gt; backend, size_t key, bool activate)</td></tr>
<tr class="memdesc:a4034ea7296d15014a6d6e14b675bacfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an existing <a class="el" href="class_chimera_t_k_1_1_async_domain.html" title="The AsyncDomain is the thread-safe entry point for each distribution tree.">AsyncDomain</a> for the specific key, or create a new one while holding the container lock.  <a href="class_chimera_t_k_1_1_async_domains_container.html#a4034ea7296d15014a6d6e14b675bacfd">More...</a><br /></td></tr>
<tr class="separator:a4034ea7296d15014a6d6e14b675bacfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b875f2d1ca0f8e2bbeb0f4c0bd9243"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1_async_domain.html">AsyncDomain</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a37b875f2d1ca0f8e2bbeb0f4c0bd9243">getAsyncDomain</a> (size_t key)</td></tr>
<tr class="memdesc:a37b875f2d1ca0f8e2bbeb0f4c0bd9243"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the shared pointer to the <a class="el" href="class_chimera_t_k_1_1_async_domain.html" title="The AsyncDomain is the thread-safe entry point for each distribution tree.">AsyncDomain</a> for a key.  <a href="class_chimera_t_k_1_1_async_domains_container.html#a37b875f2d1ca0f8e2bbeb0f4c0bd9243">More...</a><br /></td></tr>
<tr class="separator:a37b875f2d1ca0f8e2bbeb0f4c0bd9243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abece220c24e3ddd352ccf61996a352d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#abece220c24e3ddd352ccf61996a352d5">forEach</a> (const std::function&lt; void(size_t, boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1_async_domain.html">AsyncDomain</a> &gt; &amp;)&gt; &amp;executeMe)</td></tr>
<tr class="memdesc:abece220c24e3ddd352ccf61996a352d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate all AsyncDomains under the container lock.  <a href="class_chimera_t_k_1_1_async_domains_container.html#abece220c24e3ddd352ccf61996a352d5">More...</a><br /></td></tr>
<tr class="separator:abece220c24e3ddd352ccf61996a352d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a9a46ccb6cddb4130d58a3c6b7d5b14e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a9a46ccb6cddb4130d58a3c6b7d5b14e2">distributeExceptions</a> ()</td></tr>
<tr class="memdesc:a9a46ccb6cddb4130d58a3c6b7d5b14e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Endless loop executed in the thread.  <a href="class_chimera_t_k_1_1_async_domains_container.html#a9a46ccb6cddb4130d58a3c6b7d5b14e2">More...</a><br /></td></tr>
<tr class="separator:a9a46ccb6cddb4130d58a3c6b7d5b14e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a98de1a79895af24fe55c44971063959a"><td class="memItemLeft" align="right" valign="top">std::atomic_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a98de1a79895af24fe55c44971063959a">_isSendingExceptions</a> {false}</td></tr>
<tr class="separator:a98de1a79895af24fe55c44971063959a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab3021b3a18a7c7ac9f011d27db3d67e"><td class="memItemLeft" align="right" valign="top">cppext::future_queue&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#aab3021b3a18a7c7ac9f011d27db3d67e">_startExceptionDistribution</a> {2}</td></tr>
<tr class="separator:aab3021b3a18a7c7ac9f011d27db3d67e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a784ac02afbcb6bec895d6970fde20d"><td class="memItemLeft" align="right" valign="top">std::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a1a784ac02afbcb6bec895d6970fde20d">_distributorThread</a></td></tr>
<tr class="separator:a1a784ac02afbcb6bec895d6970fde20d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc37563aa54815e1c31e21d145925f01"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#afc37563aa54815e1c31e21d145925f01">_threadCreationMutex</a></td></tr>
<tr class="separator:afc37563aa54815e1c31e21d145925f01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d0bcee28e136ebf80dbbcc45a6b9807"><td class="memItemLeft" align="right" valign="top">std::atomic_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a9d0bcee28e136ebf80dbbcc45a6b9807">_threadIsRunning</a> {false}</td></tr>
<tr class="separator:a9d0bcee28e136ebf80dbbcc45a6b9807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7155aa44894538c71951118e66d0e173"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a7155aa44894538c71951118e66d0e173">_domainsMutex</a></td></tr>
<tr class="separator:a7155aa44894538c71951118e66d0e173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10be2ba659b75c88e041c4e812c68542"><td class="memItemLeft" align="right" valign="top">std::map&lt; size_t, boost::weak_ptr&lt; <a class="el" href="class_chimera_t_k_1_1_async_domain.html">AsyncDomain</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a10be2ba659b75c88e041c4e812c68542">_asyncDomains</a></td></tr>
<tr class="separator:a10be2ba659b75c88e041c4e812c68542"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="class_chimera_t_k_1_1_async_domains_container.html" title="The AsyncDomainsContainer has a container with AsyncDomains and is performing actions on all of them.">AsyncDomainsContainer</a> has a container with AsyncDomains and is performing actions on all of them. </p>
<p>The key type to identify the domain is of type size_t, which is the return type of std::hash, so you can easily use the hashes in case the backend uses a different key type.</p>
<p>Sending exceptions is implemented via a thread. <a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#ad8b9415c10769b6c384b920f99a9666a" title="Request the sending of exceptions.">sendExceptions()</a> is pushing the exception message into a queue and returns immediately. A distributor thread is waiting for data in the queue and is sending the exceptions in all AsyncDomains.</p>
<p>The reason for having a thread is a possible lock order inversion. In the distribution tree, accessor creation must be mutually exclusibe with data distribution, hence locks cannot be avoided. As excaption can occur during data distribution. and backend::setException() is called, this would lead to recursive calls to the distribution tree, which might result in lock order inversions and deadlocks. To avoid this, setException will only put the exception message into the queue and return, allowing the failing distribution call to complete. The exception distribution will then be done by the thread in the <a class="el" href="class_chimera_t_k_1_1_async_domains_container.html" title="The AsyncDomainsContainer has a container with AsyncDomains and is performing actions on all of them.">AsyncDomainsContainer</a>, after the mutex in the <a class="el" href="class_chimera_t_k_1_1_async_domain.html" title="The AsyncDomain is the thread-safe entry point for each distribution tree.">AsyncDomain</a> is free again. </p>

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8h_source.html#l00034">34</a> of file <a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a65abe7f110839abaa0ec8a4fa62499df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65abe7f110839abaa0ec8a4fa62499df">&#9670;&nbsp;</a></span>~AsyncDomainsContainer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ChimeraTK::AsyncDomainsContainer::~AsyncDomainsContainer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8cc_source.html#l00041">41</a> of file <a class="el" href="_async_domains_container_8cc_source.html">AsyncDomainsContainer.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9a46ccb6cddb4130d58a3c6b7d5b14e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a46ccb6cddb4130d58a3c6b7d5b14e2">&#9670;&nbsp;</a></span>distributeExceptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ChimeraTK::AsyncDomainsContainer::distributeExceptions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Endless loop executed in the thread. </p>

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8cc_source.html#l00012">12</a> of file <a class="el" href="_async_domains_container_8cc_source.html">AsyncDomainsContainer.cc</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1_async_domains_container_a9a46ccb6cddb4130d58a3c6b7d5b14e2_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="abece220c24e3ddd352ccf61996a352d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abece220c24e3ddd352ccf61996a352d5">&#9670;&nbsp;</a></span>forEach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ChimeraTK::AsyncDomainsContainer::forEach </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; void(size_t, boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1_async_domain.html">AsyncDomain</a> &gt; &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>executeMe</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate all AsyncDomains under the container lock. </p>
<p>Each weak pointer is locked and the argument function is executed if the share_ptr is not nullptr.</p>
<p>The first parameter of the callback function is the domain key, the second a shared pointer to the domain itself. </p>

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8cc_source.html#l00092">92</a> of file <a class="el" href="_async_domains_container_8cc_source.html">AsyncDomainsContainer.cc</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1_async_domains_container_abece220c24e3ddd352ccf61996a352d5_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a37b875f2d1ca0f8e2bbeb0f4c0bd9243"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37b875f2d1ca0f8e2bbeb0f4c0bd9243">&#9670;&nbsp;</a></span>getAsyncDomain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1_async_domain.html">AsyncDomain</a> &gt; ChimeraTK::AsyncDomainsContainer::getAsyncDomain </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the shared pointer to the <a class="el" href="class_chimera_t_k_1_1_async_domain.html" title="The AsyncDomain is the thread-safe entry point for each distribution tree.">AsyncDomain</a> for a key. </p>
<p>The shared pointer might be nullptr if locking of the weak pointer failed. </p>

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8cc_source.html#l00083">83</a> of file <a class="el" href="_async_domains_container_8cc_source.html">AsyncDomainsContainer.cc</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1_async_domains_container_a37b875f2d1ca0f8e2bbeb0f4c0bd9243_icgraph.svg" width="531" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4034ea7296d15014a6d6e14b675bacfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4034ea7296d15014a6d6e14b675bacfd">&#9670;&nbsp;</a></span>getOrCreateAsyncDomain()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename BackendType , typename BackendSpecificDataType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; <a class="el" href="class_chimera_t_k_1_1_async_domain_impl.html">AsyncDomainImpl</a>&lt; BackendSpecificDataType &gt; &gt; ChimeraTK::AsyncDomainsContainer::getOrCreateAsyncDomain </td>
          <td>(</td>
          <td class="paramtype">boost::shared_ptr&lt; BackendType &gt;&#160;</td>
          <td class="paramname"><em>backend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>activate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get an existing <a class="el" href="class_chimera_t_k_1_1_async_domain.html" title="The AsyncDomain is the thread-safe entry point for each distribution tree.">AsyncDomain</a> for the specific key, or create a new one while holding the container lock. </p>
<p>The function is templated to the backend type and a BackendSpecificDataType. The BackendSpecificDataType might vary for different AsyncDomains in the same backend.</p>
<p>The backend has to provide a function to get the initial value for that <a class="el" href="class_chimera_t_k_1_1_async_domain.html" title="The AsyncDomain is the thread-safe entry point for each distribution tree.">AsyncDomain</a>. </p><div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> BackendSpecificDataType&gt;</div>
<div class="line">std::pair&lt;BackendSpecificUserType, VersionNumber&gt; getAsyncDomainInitialValue(<span class="keywordtype">size_t</span> asyncDomainId);</div>
</div><!-- fragment --><p> This function is returning the initial value for the domain with the according asyncDomainID. If the version number can be determined from the initial value data, the version number is set here. Otherwise the version number must be <a class="el" href="class_chimera_t_k_1_1_version_number.html" title="Class for generating and holding version numbers without exposing a numeric representation.">VersionNumber</a>{nullptr}. If the version number cannot be determined from the initial value <b>do not create a new version number here!</b>. This must happen inside the <a class="el" href="class_chimera_t_k_1_1_async_domain.html" title="The AsyncDomain is the thread-safe entry point for each distribution tree.">AsyncDomain</a> under the <a class="el" href="class_chimera_t_k_1_1_async_domain.html" title="The AsyncDomain is the thread-safe entry point for each distribution tree.">AsyncDomain</a> lock to avoid race conditions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">backend</td><td>Shared pointer to the exact backend type. As template functions cannot be virtual, we need a pointer of the type that implements getAsyncDomainInitialValue(). </td></tr>
    <tr><td class="paramname">key</td><td>The AsyncDomainId is the key for the container (map). </td></tr>
    <tr><td class="paramname">activate</td><td>Flag whether to activate the async domain if it is created. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8h_source.html#l00107">107</a> of file <a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1_async_domains_container_a4034ea7296d15014a6d6e14b675bacfd_cgraph.svg" width="584" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1_async_domains_container_a4034ea7296d15014a6d6e14b675bacfd_icgraph.svg" width="576" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4432ecd6be42e79ade8ecf5acdda575d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4432ecd6be42e79ade8ecf5acdda575d">&#9670;&nbsp;</a></span>isSendingExceptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ChimeraTK::AsyncDomainsContainer::isSendingExceptions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether an exception distribution is started and not completed yet. </p>

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8h_source.html#l00045">45</a> of file <a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_chimera_t_k_1_1_async_domains_container_a4432ecd6be42e79ade8ecf5acdda575d_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ad8b9415c10769b6c384b920f99a9666a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8b9415c10769b6c384b920f99a9666a">&#9670;&nbsp;</a></span>sendExceptions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ChimeraTK::AsyncDomainsContainer::sendExceptions </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>exceptionMessage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request the sending of exceptions. </p>
<p>This function stores the request and returns immediately. The actual exception distribution is done asynchronously and has not necessarily finished when the function call returns. Use <a class="el" href="class_chimera_t_k_1_1_async_domains_container.html#a4432ecd6be42e79ade8ecf5acdda575d" title="Check whether an exception distribution is started and not completed yet.">isSendingExceptions()</a> to check whether the exception distribution has finished. </p>

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8cc_source.html#l00065">65</a> of file <a class="el" href="_async_domains_container_8cc_source.html">AsyncDomainsContainer.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a10be2ba659b75c88e041c4e812c68542"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10be2ba659b75c88e041c4e812c68542">&#9670;&nbsp;</a></span>_asyncDomains</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;size_t, boost::weak_ptr&lt;<a class="el" href="class_chimera_t_k_1_1_async_domain.html">AsyncDomain</a>&gt; &gt; ChimeraTK::AsyncDomainsContainer::_asyncDomains</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8h_source.html#l00101">101</a> of file <a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>.</p>

</div>
</div>
<a id="a1a784ac02afbcb6bec895d6970fde20d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a784ac02afbcb6bec895d6970fde20d">&#9670;&nbsp;</a></span>_distributorThread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::thread ChimeraTK::AsyncDomainsContainer::_distributorThread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8h_source.html#l00094">94</a> of file <a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>.</p>

</div>
</div>
<a id="a7155aa44894538c71951118e66d0e173"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7155aa44894538c71951118e66d0e173">&#9670;&nbsp;</a></span>_domainsMutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex ChimeraTK::AsyncDomainsContainer::_domainsMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8h_source.html#l00100">100</a> of file <a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>.</p>

</div>
</div>
<a id="a98de1a79895af24fe55c44971063959a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98de1a79895af24fe55c44971063959a">&#9670;&nbsp;</a></span>_isSendingExceptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic_bool ChimeraTK::AsyncDomainsContainer::_isSendingExceptions {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8h_source.html#l00088">88</a> of file <a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>.</p>

</div>
</div>
<a id="aab3021b3a18a7c7ac9f011d27db3d67e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab3021b3a18a7c7ac9f011d27db3d67e">&#9670;&nbsp;</a></span>_startExceptionDistribution</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cppext::future_queue&lt;std::string&gt; ChimeraTK::AsyncDomainsContainer::_startExceptionDistribution {2}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8h_source.html#l00093">93</a> of file <a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>.</p>

</div>
</div>
<a id="afc37563aa54815e1c31e21d145925f01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc37563aa54815e1c31e21d145925f01">&#9670;&nbsp;</a></span>_threadCreationMutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex ChimeraTK::AsyncDomainsContainer::_threadCreationMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8h_source.html#l00095">95</a> of file <a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>.</p>

</div>
</div>
<a id="a9d0bcee28e136ebf80dbbcc45a6b9807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d0bcee28e136ebf80dbbcc45a6b9807">&#9670;&nbsp;</a></span>_threadIsRunning</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic_bool ChimeraTK::AsyncDomainsContainer::_threadIsRunning {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_async_domains_container_8h_source.html#l00096">96</a> of file <a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>device_backends/include/<a class="el" href="_async_domains_container_8h_source.html">AsyncDomainsContainer.h</a></li>
<li>device_backends/src/<a class="el" href="_async_domains_container_8cc_source.html">AsyncDomainsContainer.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_chimera_t_k.html">ChimeraTK</a></li><li class="navelem"><a class="el" href="class_chimera_t_k_1_1_async_domains_container.html">AsyncDomainsContainer</a></li>
    <li class="footer">Generated on Fri Apr 12 2024 08:34:36 for ChimeraTK-DeviceAccess by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
