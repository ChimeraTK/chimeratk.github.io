<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ChimeraTK-DeviceAccess: Testing applications using the DummyBackends</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ChimeraTK_Logo_whitebg.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ChimeraTK-DeviceAccess
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('testing_with_dummy_backends.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Testing applications using the DummyBackends </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page introduces the DummyBackends provided with ChimeraTK-DeviceAccess.</p>
<p>When testing application code, it is often beneficial not to rely on real hardware. ChimeraTK-DeviceAccess provides two backends for this purpose, the <a class="el" href="class_chimera_t_k_1_1_dummy_backend.html" title="The dummy device opens a mapping file instead of a device, and implements all registers defined in th...">ChimeraTK::DummyBackend</a> and the <a class="el" href="class_chimera_t_k_1_1_shared_dummy_backend.html" title="The shared dummy device opens a mapping file defining the registers and implements them in shared mem...">ChimeraTK::SharedDummyBackend</a>. The DummyBackend emulates a devices' register space in application memory. The SharedDummyBackend allocates the registers in shared memory, so it can be access from multiple processes. E.g., QtHardMon can be used to stimulate and monitor a running application. Hence, these backends provide a generic way to test input-/output- operations on the application. Note that it is also possible to write DummyBackends for a specific device, as described in <a class="el" href="custom_backends.html">Using and creating custom backends</a>.</p>
<h1><a class="anchor" id="dmap_specify_dummies"></a>
Specifying the dummies in the device map file</h1>
<p>The DummyBackends get registered by the names, "dummy" and "sharedMemoryDummy", so dummy devices have to be defined in the device map file as </p><pre class="fragment">DUMMYDEVICE       (dummy?map=mymapfile.map)
SHAREDDUMMYDEVICE (sharedMemoryDummy?map=mymapfile.map)
</pre><p> for the DummyBackend and the SharedDummyBackend, respectively.</p>
<h1><a class="anchor" id="dummy_backends_write_readonly"></a>
Writeing to read-only registers</h1>
<p>For device registers that are read-only, an attempt to write to these registers will result in a <a class="el" href="class_chimera_t_k_1_1logic__error.html" title="Exception thrown when a logic error has occured.">ChimeraTK::logic_error</a>. However, many registers which are normally set by the firmware of the device are read-only in the inferface. This prevents stimulating those registers for tests of the application. The DummyBackends provide a functionality to override this property of the registers. To get write access to these registers a special register accessor pointing to the same address can be created by appending the suffix <code>".DUMMY_WRITEABLE"</code> to the register name:</p>
<div class="fragment"><div class="line"><span class="comment">// Get a regular accessor with read-only access</span></div>
<div class="line"><span class="keyword">auto</span> accessorToRORegister               = myDevice.getScalarRegisterAccessor&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;MY_MODULE/READ_ONLY_REGISTER&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get a modified accessor with write access to the same register</span></div>
<div class="line"><span class="keyword">auto</span> accessorToRORegister_madeWriteable = myDevice.getScalarRegisterAccessor&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;MY_MODULE/READ_ONLY_REGISTER.DUMMY_WRITEABLE&quot;</span>);</div>
</div><!-- fragment --><p>Note that the special register do not get added to the <code>RegisterCatalogue</code> of the backend in order to avoid effects on the application using the same backend instance. Write access to the special register accessor can also be tested programmatically, i.e. using the above accessor:</p>
<div class="fragment"><div class="line">accessorToRORegister_madeWriteable.isReadOnly();   <span class="comment">// returns false</span></div>
<div class="line">accessorToRORegister_madeWriteable.isWriteable();  <span class="comment">// returns true</span></div>
</div><!-- fragment --><p>Next topic: <a class="el" href="custom_backends.html">Using and creating custom backends</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Mar 16 2023 04:53:14 for ChimeraTK-DeviceAccess by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
